/*!
 * Isotope PACKAGED v2.1.0
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */

(function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function n(e,i){t.fn[e]=function(n){if("string"==typeof n){for(var s=o.call(arguments,1),a=0,u=this.length;u>a;a++){var p=this[a],h=t.data(p,e);if(h)if(t.isFunction(h[n])&&"_"!==n.charAt(0)){var f=h[n].apply(h,s);if(void 0!==f)return f}else r("no such method '"+n+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; "+"attempted to call '"+n+"'")}return this}return this.each(function(){var o=t.data(this,e);o?(o.option(n),o._init()):(o=new i(this,n),t.data(this,e,o))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),n(t,e)},t.bridget}}var o=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):"object"==typeof exports?i(require("jquery")):i(t.jQuery)})(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,o=function(){};i.addEventListener?o=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(o=function(t,i,o){t[i+o]=o.handleEvent?function(){var i=e(t);o.handleEvent.call(o,i)}:function(){var i=e(t);o.call(t,i)},t.attachEvent("on"+i,t[i+o])});var n=function(){};i.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(o){t[e+i]=void 0}});var r={bind:o,unbind:n};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;e.isReady||i||o()}function o(){e.isReady=!0;for(var t=0,i=s.length;i>t;t++){var o=s[t];o()}}function n(n){return"complete"===r.readyState?o():(n.bind(r,"DOMContentLoaded",i),n.bind(r,"readystatechange",i),n.bind(t,"load",i)),e}var r=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],n):"object"==typeof exports?module.exports=n(require("eventie")):t.docReady=n(t.eventie)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var o=t.prototype,n=this,r=n.EventEmitter;o.getListeners=function(t){var e,i,o=this._getEvents();if(t instanceof RegExp){e={};for(i in o)o.hasOwnProperty(i)&&t.test(i)&&(e[i]=o[i])}else e=o[t]||(o[t]=[]);return e},o.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},o.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},o.addListener=function(t,i){var o,n=this.getListenersAsObject(t),r="object"==typeof i;for(o in n)n.hasOwnProperty(o)&&-1===e(n[o],i)&&n[o].push(r?i:{listener:i,once:!1});return this},o.on=i("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=i("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,i){var o,n,r=this.getListenersAsObject(t);for(n in r)r.hasOwnProperty(n)&&(o=e(r[n],i),-1!==o&&r[n].splice(o,1));return this},o.off=i("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,i){var o,n,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(o=i.length;o--;)r.call(this,e,i[o]);else for(o in e)e.hasOwnProperty(o)&&(n=e[o])&&("function"==typeof n?r.call(this,o,n):s.call(this,o,n));return this},o.removeEvent=function(t){var e,i=typeof t,o=this._getEvents();if("string"===i)delete o[t];else if(t instanceof RegExp)for(e in o)o.hasOwnProperty(e)&&t.test(e)&&delete o[e];else delete this._events;return this},o.removeAllListeners=i("removeEvent"),o.emitEvent=function(t,e){var i,o,n,r,s=this.getListenersAsObject(t);for(n in s)if(s.hasOwnProperty(n))for(o=s[n].length;o--;)i=s[n][o],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},o.trigger=i("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return n.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof o[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,n=0,r=i.length;r>n;n++)if(e=i[n]+t,"string"==typeof o[e])return e}}var i="Webkit Moz ms Ms O".split(" "),o=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){}function o(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++){var o=s[e];t[o]=0}return t}function n(i){function n(){if(!d){d=!0;var o=t.getComputedStyle;if(p=function(){var t=o?function(t){return o(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? "+"See http://bit.ly/getsizebug1"),i}}(),h=i("boxSizing")){var n=document.createElement("div");n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style[h]="border-box";var s=document.body||document.documentElement;s.appendChild(n);var a=p(n);f=200===e(a.width),s.removeChild(n)}}}function a(t){if(n(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=p(t);if("none"===i.display)return o();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var a=r.isBorderBox=!(!h||!i[h]||"border-box"!==i[h]),d=0,l=s.length;l>d;d++){var c=s[d],y=i[c];y=u(t,y);var m=parseFloat(y);r[c]=isNaN(m)?0:m}var g=r.paddingLeft+r.paddingRight,v=r.paddingTop+r.paddingBottom,_=r.marginLeft+r.marginRight,I=r.marginTop+r.marginBottom,L=r.borderLeftWidth+r.borderRightWidth,z=r.borderTopWidth+r.borderBottomWidth,b=a&&f,x=e(i.width);x!==!1&&(r.width=x+(b?0:g+L));var S=e(i.height);return S!==!1&&(r.height=S+(b?0:v+z)),r.innerWidth=r.width-(g+L),r.innerHeight=r.height-(v+z),r.outerWidth=r.width+_,r.outerHeight=r.height+I,r}}function u(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var o=e.style,n=o.left,r=e.runtimeStyle,s=r&&r.left;return s&&(r.left=e.currentStyle.left),o.left=i,i=o.pixelLeft,o.left=n,s&&(r.left=s),i}var p,h,f,d=!1;return a}var r="undefined"==typeof console?i:function(t){console.error(t)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("desandro-get-style-property")):t.getSize=n(t.getStyleProperty)}(window),function(t){function e(t,e){return t[s](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function o(t,e){i(t);for(var o=t.parentNode.querySelectorAll(e),n=0,r=o.length;r>n;n++)if(o[n]===t)return!0;return!1}function n(t,o){return i(t),e(t,o)}var r,s=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,o=e.length;o>i;i++){var n=e[i],r=n+"MatchesSelector";if(t[r])return r}}();if(s){var a=document.createElement("div"),u=e(a,"div");r=u?e:n}else r=o;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return r}):"object"==typeof exports?module.exports=r:window.matchesSelector=r}(Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return e=null,!0}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function n(t,n,r){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var u=r("transition"),p=r("transform"),h=u&&p,f=!!r("perspective"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],l=["transform","transition","transitionDuration","transitionProperty"],c=function(){for(var t={},e=0,i=l.length;i>e;e++){var o=l[e],n=r(o);n&&n!==o&&(t[o]=n)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=n(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){var o=c[i]||i;e[o]=t[i]}},a.prototype.getPosition=function(){var t=s(this.element),e=this.layout.options,i=e.isOriginLeft,o=e.isOriginTop,n=parseInt(t[i?"left":"right"],10),r=parseInt(t[o?"top":"bottom"],10);n=isNaN(n)?0:n,r=isNaN(r)?0:r;var a=this.layout.size;n-=i?a.paddingLeft:a.paddingRight,r-=o?a.paddingTop:a.paddingBottom,this.position.x=n,this.position.y=r},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var y=f?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=parseInt(t,10),r=parseInt(e,10),s=n===this.position.x&&r===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return this.layoutPosition(),void 0;var a=t-i,u=e-o,p={},h=this.layout.options;a=h.isOriginLeft?a:-a,u=h.isOriginTop?u:-u,p.transform=y(a,u),this.transition({to:p,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=h?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(t),void 0;var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var o=this.element.offsetHeight;o=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var m=p&&o(p)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(d,this,!1))},a.prototype.transition=a.prototype[u?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,o=g[t.propertyName]||t.propertyName;if(delete e.ingProperties[o],i(e.ingProperties)&&this.disableTransition(),o in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[o]),o in e.onEnd){var n=e.onEnd[o];n.call(this),delete e.onEnd[o]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(d,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(v)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var r=t.getComputedStyle,s=r?function(t){return r(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(t.Outlayer={},t.Outlayer.Item=n(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===f.call(t)}function o(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var o=0,n=t.length;n>o;o++)e.push(t[o]);else e.push(t);return e}function n(t,e){var i=l(e,t);-1!==i&&e.splice(i,1)}function r(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function s(i,s,f,l,c,y){function m(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!d(t))return u&&u.error("Bad "+this.constructor.namespace+" element: "+t),void 0;this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var o=++g;this.element.outlayerGUID=o,v[o]=this,this._create(),this.options.isInitLayout&&this.layout()}var g=0,v={};return m.namespace="outlayer",m.Item=y,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(m.prototype,f.prototype),m.prototype.option=function(t){e(this.options,t)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0,r=e.length;r>n;n++){var s=e[n],a=new i(s,this);o.push(a)}return o},m.prototype._filterFindItemElements=function(t){t=o(t);for(var e=this.options.itemSelector,i=[],n=0,r=t.length;r>n;n++){var s=t[n];if(d(s))if(e){c(s,e)&&i.push(s);for(var a=s.querySelectorAll(e),u=0,p=a.length;p>u;u++)i.push(a[u])}else i.push(s)}return i},m.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=l(this.element)},m.prototype._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):d(o)&&(i=o),this[t]=i?l(i)[e]:o):this[t]=0},m.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},m.prototype._getItemsForLayout=function(t){for(var e=[],i=0,o=t.length;o>i;i++){var n=t[i];n.isIgnored||e.push(n)}return e},m.prototype._layoutItems=function(t,e){function i(){o.emitEvent("layoutComplete",[o,t])}var o=this;if(!t||!t.length)return i(),void 0;this._itemsOn(t,"layout",i);for(var n=[],r=0,s=t.length;s>r;r++){var a=t[r],u=this._getItemLayoutPosition(a);u.item=a,u.isInstant=e||a.isLayoutInstant,n.push(u)}this._processLayoutQueue(n)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var o=t[e];this._positionItem(o.item,o.x,o.y,o.isInstant)}},m.prototype._positionItem=function(t,e,i,o){o?t.goTo(e,i):t.moveTo(e,i)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},m.prototype._getContainerSize=h,m.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},m.prototype._itemsOn=function(t,e,i){function o(){return n++,n===r&&i.call(s),!0}for(var n=0,r=t.length,s=this,a=0,u=t.length;u>a;a++){var p=t[a];p.on(e,o)}},m.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},m.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},m.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var o=t[e];this.ignore(o)}}},m.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var o=t[e];n(o,this.stamps),this.unignore(o)}},m.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=o(t)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},m.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},m.prototype._manageStamp=h,m.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,o=l(t),n={left:e.left-i.left-o.marginLeft,top:e.top-i.top-o.marginTop,right:i.right-e.right-o.marginRight,bottom:i.bottom-e.bottom-o.marginBottom};return n},m.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},m.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},m.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var t=l(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},m.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},m.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},m.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var o=t[i];o.reveal()}},m.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var o=t[i];o.hide()}},m.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var o=this.items[e];if(o.element===t)return o}},m.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,o=t.length;o>i;i++){var n=t[i],r=this.getItem(n);r&&e.push(r)}return e}},m.prototype.remove=function(t){t=o(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,r=e.length;r>i;i++){var s=e[i];s.remove(),n(s,this.items)}}},m.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var o=this.items[e];o.destroy()}this.unbindResize();var n=this.element.outlayerGUID;delete v[n],delete this.element.outlayerGUID,p&&p.removeData(this.element,this.constructor.namespace)},m.data=function(t){var e=t&&t.outlayerGUID;return e&&v[e]},m.create=function(t,i){function o(){m.apply(this,arguments)}return Object.create?o.prototype=Object.create(m.prototype):e(o.prototype,m.prototype),o.prototype.constructor=o,o.defaults=e({},m.defaults),e(o.defaults,i),o.prototype.settings={},o.namespace=t,o.data=m.data,o.Item=function(){y.apply(this,arguments)},o.Item.prototype=new y,s(function(){for(var e=r(t),i=a.querySelectorAll(".js-"+e),n="data-"+e+"-options",s=0,h=i.length;h>s;s++){var f,d=i[s],l=d.getAttribute(n);try{f=l&&JSON.parse(l)}catch(c){u&&u.error("Error parsing "+n+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+c);continue}var y=new o(d,f);p&&p.data(d,t,y)}}),p&&p.bridget&&p.bridget(t,o),o},m.Item=y,m}var a=t.document,u=t.console,p=t.jQuery,h=function(){},f=Object.prototype.toString,d="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},l=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):"object"==typeof exports?module.exports=s(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):t.Outlayer=s(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t){function e(){t.Item.apply(this,arguments)}e.prototype=new t.Item,e.prototype._create=function(){this.id=this.layout.itemGUID++,t.Item.prototype._create.call(this),this.sortData={}},e.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var o=e[i];this.sortData[i]=o(this.element,this)}}};var i=e.prototype.destroy;return e.prototype.destroy=function(){i.apply(this,arguments),this.css({display:""})},e}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):"object"==typeof exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window),function(t){function e(t,e){function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}return function(){function t(t){return function(){return e.prototype[t].apply(this.isotope,arguments)}}for(var o=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],n=0,r=o.length;r>n;n++){var s=o[n];i.prototype[s]=t(s)}}(),i.prototype.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!==this.isotope.size.innerHeight},i.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},i.prototype.getSegmentSize=function(t,e){var i=t+e,o="outer"+e;if(this._getMeasurement(i,o),!this[i]){var n=this.getFirstItemSize();this[i]=n&&n[o]||this.isotope.size["inner"+e]}},i.prototype.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},i.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function o(){i.apply(this,arguments)}return o.prototype=new i,e&&(o.options=e),o.prototype.namespace=t,i.modes[t]=o,o},i}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window),function(t){function e(t,e){var o=t.create("masonry");return o.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},o.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},o.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},o.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,o=e&&1>e?"round":"ceil",n=Math[o](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var r=this._getColGroup(n),s=Math.min.apply(Math,r),a=i(r,s),u={x:this.columnWidth*a,y:s},p=s+t.size.outerHeight,h=this.cols+1-r.length,f=0;h>f;f++)this.colYs[a+f]=p;return u},o.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;i>o;o++){var n=this.colYs.slice(o,o+t);e[o]=Math.max.apply(Math,n)}return e},o.prototype._manageStamp=function(t){var i=e(t),o=this._getElementOffset(t),n=this.options.isOriginLeft?o.left:o.right,r=n+i.outerWidth,s=Math.floor(n/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var u=(this.options.isOriginTop?o.top:o.bottom)+i.outerHeight,p=s;a>=p;p++)this.colYs[p]=Math.max(u,this.colYs[p])},o.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},o.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},o}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++){var n=t[i];if(n===e)return i}return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t,i){var o=t.create("masonry"),n=o.prototype._getElementOffset,r=o.prototype.layout,s=o.prototype._getMeasurement;e(o.prototype,i.prototype),o.prototype._getElementOffset=n,o.prototype.layout=r,o.prototype._getMeasurement=s;var a=o.prototype.measureColumns;o.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,a.call(this)};var u=o.prototype._manageStamp;return o.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,u.apply(this,arguments)},o}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],i):"object"==typeof exports?module.exports=i(require("../layout-mode"),require("masonry-layout")):i(t.Isotope.LayoutMode,t.Masonry)}(window),function(t){function e(t){var e=t.create("fitRows");return e.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var o={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,o},e.prototype._getContainerSize=function(){return{height:this.maxY}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window),function(t){function e(t){var e=t.create("vertical",{horizontalAlignment:0});return e.prototype._resetLayout=function(){this.y=0},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},e.prototype._getContainerSize=function(){return{height:this.y}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===h.call(t)}function o(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var o=0,n=t.length;n>o;o++)e.push(t[o]);else e.push(t);return e}function n(t,e){var i=f(e,t);-1!==i&&e.splice(i,1)}function r(t,i,r,u,h){function f(t,e){return function(i,o){for(var n=0,r=t.length;r>n;n++){var s=t[n],a=i.sortData[s],u=o.sortData[s];if(a>u||u>a){var p=void 0!==e[s]?e[s]:e,h=p?1:-1;return(a>u?1:-1)*h}}return 0}}var d=t.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=u,d.LayoutMode=h,d.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),t.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var e in h.modes)this._initLayoutMode(e)},d.prototype.reloadItems=function(){this.itemGUID=0,t.prototype.reloadItems.call(this)},d.prototype._itemize=function(){for(var e=t.prototype._itemize.apply(this,arguments),i=0,o=e.length;o>i;i++){var n=e[i];n.id=this.itemGUID++}return this._updateItemsSortData(e),e
},d.prototype._initLayoutMode=function(t){var i=h.modes[t],o=this.options[t]||{};this.options[t]=i.options?e(i.options,o):o,this.modes[t]=new i(this)},d.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?(this.arrange(),void 0):(this._layout(),void 0)},d.prototype._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},d.prototype.arrange=function(t){this.option(t),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},d.prototype._init=d.prototype.arrange,d.prototype._getIsInstant=function(){var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=t,t},d.prototype._filter=function(t){function e(){f.reveal(n),f.hide(r)}var i=this.options.filter;i=i||"*";for(var o=[],n=[],r=[],s=this._getFilterTest(i),a=0,u=t.length;u>a;a++){var p=t[a];if(!p.isIgnored){var h=s(p);h&&o.push(p),h&&p.isHidden?n.push(p):h||p.isHidden||r.push(p)}}var f=this;return this._isInstant?this._noTransition(e):e(),o},d.prototype._getFilterTest=function(t){return s&&this.options.isJQueryFiltering?function(e){return s(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return r(e.element,t)}},d.prototype.updateSortData=function(t){var e;t?(t=o(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},d.prototype._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=l(i)}},d.prototype._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&e>i;i++){var o=t[i];o.updateSortData()}};var l=function(){function t(t){if("string"!=typeof t)return t;var i=a(t).split(" "),o=i[0],n=o.match(/^\[(.+)\]$/),r=n&&n[1],s=e(r,o),u=d.sortDataParsers[i[1]];return t=u?function(t){return t&&u(s(t))}:function(t){return t&&s(t)}}function e(t,e){var i;return i=t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&p(i)}}return t}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},d.prototype._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),i=f(e,this.options.sortAscending);this.filteredItems.sort(i),t!==this.sortHistory[0]&&this.sortHistory.unshift(t)}},d.prototype._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw Error("No layout mode: "+t);return e.options=this.options[t],e},d.prototype._resetLayout=function(){t.prototype._resetLayout.call(this),this._mode()._resetLayout()},d.prototype._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},d.prototype._manageStamp=function(t){this._mode()._manageStamp(t)},d.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},d.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},d.prototype.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},d.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps();var o=this._filterRevealAdded(e);this.layoutItems(i),this.filteredItems=o.concat(this.filteredItems)}},d.prototype._filterRevealAdded=function(t){var e=this._noTransition(function(){return this._filter(t)});return this.layoutItems(e,!0),this.reveal(e),t},d.prototype.insert=function(t){var e=this.addItems(t);if(e.length){var i,o,n=e.length;for(i=0;n>i;i++)o=e[i],this.element.appendChild(o.element);var r=this._filter(e);for(this._noTransition(function(){this.hide(r)}),i=0;n>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;n>i;i++)delete e[i].isLayoutInstant;this.reveal(r)}};var c=d.prototype.remove;return d.prototype.remove=function(t){t=o(t);var e=this.getItems(t);if(c.call(this,t),e&&e.length)for(var i=0,r=e.length;r>i;i++){var s=e[i];n(s,this.filteredItems)}},d.prototype.shuffle=function(){for(var t=0,e=this.items.length;e>t;t++){var i=this.items[t];i.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},d.prototype._noTransition=function(t){var e=this.options.transitionDuration;this.options.transitionDuration=0;var i=t.call(this);return this.options.transitionDuration=e,i},d.prototype.getFilteredItemElements=function(){for(var t=[],e=0,i=this.filteredItems.length;i>e;e++)t.push(this.filteredItems[e].element);return t},d}var s=t.jQuery,a=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},u=document.documentElement,p=u.textContent?function(t){return t.textContent}:function(t){return t.innerText},h=Object.prototype.toString,f=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],r):"object"==typeof exports?module.exports=r(require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):t.Isotope=r(t.Outlayer,t.getSize,t.matchesSelector,t.Isotope.Item,t.Isotope.LayoutMode)}(window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJ2ZW5kb3IvanF1ZXJ5Lmlzb3RvcGUubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogSXNvdG9wZSBQQUNLQUdFRCB2Mi4xLjBcbiAqIEZpbHRlciAmIHNvcnQgbWFnaWNhbCBsYXlvdXRzXG4gKiBodHRwOi8vaXNvdG9wZS5tZXRhZml6enkuY29cbiAqL1xuXG4oZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBpKHQpe2Z1bmN0aW9uIGkoZSl7ZS5wcm90b3R5cGUub3B0aW9ufHwoZS5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGUpe3QuaXNQbGFpbk9iamVjdChlKSYmKHRoaXMub3B0aW9ucz10LmV4dGVuZCghMCx0aGlzLm9wdGlvbnMsZSkpfSl9ZnVuY3Rpb24gbihlLGkpe3QuZm5bZV09ZnVuY3Rpb24obil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pe2Zvcih2YXIgcz1vLmNhbGwoYXJndW1lbnRzLDEpLGE9MCx1PXRoaXMubGVuZ3RoO3U+YTthKyspe3ZhciBwPXRoaXNbYV0saD10LmRhdGEocCxlKTtpZihoKWlmKHQuaXNGdW5jdGlvbihoW25dKSYmXCJfXCIhPT1uLmNoYXJBdCgwKSl7dmFyIGY9aFtuXS5hcHBseShoLHMpO2lmKHZvaWQgMCE9PWYpcmV0dXJuIGZ9ZWxzZSByKFwibm8gc3VjaCBtZXRob2QgJ1wiK24rXCInIGZvciBcIitlK1wiIGluc3RhbmNlXCIpO2Vsc2UgcihcImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gXCIrZStcIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgXCIrXCJhdHRlbXB0ZWQgdG8gY2FsbCAnXCIrbitcIidcIil9cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBvPXQuZGF0YSh0aGlzLGUpO28/KG8ub3B0aW9uKG4pLG8uX2luaXQoKSk6KG89bmV3IGkodGhpcyxuKSx0LmRhdGEodGhpcyxlLG8pKX0pfX1pZih0KXt2YXIgcj1cInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZT9lOmZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IodCl9O3JldHVybiB0LmJyaWRnZXQ9ZnVuY3Rpb24odCxlKXtpKGUpLG4odCxlKX0sdC5icmlkZ2V0fX12YXIgbz1BcnJheS5wcm90b3R5cGUuc2xpY2U7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImpxdWVyeS1icmlkZ2V0L2pxdWVyeS5icmlkZ2V0XCIsW1wianF1ZXJ5XCJdLGkpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2kocmVxdWlyZShcImpxdWVyeVwiKSk6aSh0LmpRdWVyeSl9KSh3aW5kb3cpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5ldmVudDtyZXR1cm4gaS50YXJnZXQ9aS50YXJnZXR8fGkuc3JjRWxlbWVudHx8ZSxpfXZhciBpPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxvPWZ1bmN0aW9uKCl7fTtpLmFkZEV2ZW50TGlzdGVuZXI/bz1mdW5jdGlvbih0LGUsaSl7dC5hZGRFdmVudExpc3RlbmVyKGUsaSwhMSl9OmkuYXR0YWNoRXZlbnQmJihvPWZ1bmN0aW9uKHQsaSxvKXt0W2krb109by5oYW5kbGVFdmVudD9mdW5jdGlvbigpe3ZhciBpPWUodCk7by5oYW5kbGVFdmVudC5jYWxsKG8saSl9OmZ1bmN0aW9uKCl7dmFyIGk9ZSh0KTtvLmNhbGwodCxpKX0sdC5hdHRhY2hFdmVudChcIm9uXCIraSx0W2krb10pfSk7dmFyIG49ZnVuY3Rpb24oKXt9O2kucmVtb3ZlRXZlbnRMaXN0ZW5lcj9uPWZ1bmN0aW9uKHQsZSxpKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxpLCExKX06aS5kZXRhY2hFdmVudCYmKG49ZnVuY3Rpb24odCxlLGkpe3QuZGV0YWNoRXZlbnQoXCJvblwiK2UsdFtlK2ldKTt0cnl7ZGVsZXRlIHRbZStpXX1jYXRjaChvKXt0W2UraV09dm9pZCAwfX0pO3ZhciByPXtiaW5kOm8sdW5iaW5kOm59O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldmVudGllL2V2ZW50aWVcIixyKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1yOnQuZXZlbnRpZT1yfSh0aGlzKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHQmJihlLmlzUmVhZHk/dCgpOnMucHVzaCh0KSl9ZnVuY3Rpb24gaSh0KXt2YXIgaT1cInJlYWR5c3RhdGVjaGFuZ2VcIj09PXQudHlwZSYmXCJjb21wbGV0ZVwiIT09ci5yZWFkeVN0YXRlO2UuaXNSZWFkeXx8aXx8bygpfWZ1bmN0aW9uIG8oKXtlLmlzUmVhZHk9ITA7Zm9yKHZhciB0PTAsaT1zLmxlbmd0aDtpPnQ7dCsrKXt2YXIgbz1zW3RdO28oKX19ZnVuY3Rpb24gbihuKXtyZXR1cm5cImNvbXBsZXRlXCI9PT1yLnJlYWR5U3RhdGU/bygpOihuLmJpbmQocixcIkRPTUNvbnRlbnRMb2FkZWRcIixpKSxuLmJpbmQocixcInJlYWR5c3RhdGVjaGFuZ2VcIixpKSxuLmJpbmQodCxcImxvYWRcIixpKSksZX12YXIgcj10LmRvY3VtZW50LHM9W107ZS5pc1JlYWR5PSExLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJkb2MtcmVhZHkvZG9jLXJlYWR5XCIsW1wiZXZlbnRpZS9ldmVudGllXCJdLG4pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPW4ocmVxdWlyZShcImV2ZW50aWVcIikpOnQuZG9jUmVhZHk9bih0LmV2ZW50aWUpfSh3aW5kb3cpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31mdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciBpPXQubGVuZ3RoO2ktLTspaWYodFtpXS5saXN0ZW5lcj09PWUpcmV0dXJuIGk7cmV0dXJuLTF9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBvPXQucHJvdG90eXBlLG49dGhpcyxyPW4uRXZlbnRFbWl0dGVyO28uZ2V0TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlLGksbz10aGlzLl9nZXRFdmVudHMoKTtpZih0IGluc3RhbmNlb2YgUmVnRXhwKXtlPXt9O2ZvcihpIGluIG8pby5oYXNPd25Qcm9wZXJ0eShpKSYmdC50ZXN0KGkpJiYoZVtpXT1vW2ldKX1lbHNlIGU9b1t0XXx8KG9bdF09W10pO3JldHVybiBlfSxvLmZsYXR0ZW5MaXN0ZW5lcnM9ZnVuY3Rpb24odCl7dmFyIGUsaT1bXTtmb3IoZT0wO3QubGVuZ3RoPmU7ZSs9MSlpLnB1c2godFtlXS5saXN0ZW5lcik7cmV0dXJuIGl9LG8uZ2V0TGlzdGVuZXJzQXNPYmplY3Q9ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLmdldExpc3RlbmVycyh0KTtyZXR1cm4gaSBpbnN0YW5jZW9mIEFycmF5JiYoZT17fSxlW3RdPWkpLGV8fGl9LG8uYWRkTGlzdGVuZXI9ZnVuY3Rpb24odCxpKXt2YXIgbyxuPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QodCkscj1cIm9iamVjdFwiPT10eXBlb2YgaTtmb3IobyBpbiBuKW4uaGFzT3duUHJvcGVydHkobykmJi0xPT09ZShuW29dLGkpJiZuW29dLnB1c2gocj9pOntsaXN0ZW5lcjppLG9uY2U6ITF9KTtyZXR1cm4gdGhpc30sby5vbj1pKFwiYWRkTGlzdGVuZXJcIiksby5hZGRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcih0LHtsaXN0ZW5lcjplLG9uY2U6ITB9KX0sby5vbmNlPWkoXCJhZGRPbmNlTGlzdGVuZXJcIiksby5kZWZpbmVFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRMaXN0ZW5lcnModCksdGhpc30sby5kZWZpbmVFdmVudHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7dC5sZW5ndGg+ZTtlKz0xKXRoaXMuZGVmaW5lRXZlbnQodFtlXSk7cmV0dXJuIHRoaXN9LG8ucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCxpKXt2YXIgbyxuLHI9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdCh0KTtmb3IobiBpbiByKXIuaGFzT3duUHJvcGVydHkobikmJihvPWUocltuXSxpKSwtMSE9PW8mJnJbbl0uc3BsaWNlKG8sMSkpO3JldHVybiB0aGlzfSxvLm9mZj1pKFwicmVtb3ZlTGlzdGVuZXJcIiksby5hZGRMaXN0ZW5lcnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCExLHQsZSl9LG8ucmVtb3ZlTGlzdGVuZXJzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMCx0LGUpfSxvLm1hbmlwdWxhdGVMaXN0ZW5lcnM9ZnVuY3Rpb24odCxlLGkpe3ZhciBvLG4scj10P3RoaXMucmVtb3ZlTGlzdGVuZXI6dGhpcy5hZGRMaXN0ZW5lcixzPXQ/dGhpcy5yZW1vdmVMaXN0ZW5lcnM6dGhpcy5hZGRMaXN0ZW5lcnM7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBSZWdFeHApZm9yKG89aS5sZW5ndGg7by0tOylyLmNhbGwodGhpcyxlLGlbb10pO2Vsc2UgZm9yKG8gaW4gZSllLmhhc093blByb3BlcnR5KG8pJiYobj1lW29dKSYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4/ci5jYWxsKHRoaXMsbyxuKTpzLmNhbGwodGhpcyxvLG4pKTtyZXR1cm4gdGhpc30sby5yZW1vdmVFdmVudD1mdW5jdGlvbih0KXt2YXIgZSxpPXR5cGVvZiB0LG89dGhpcy5fZ2V0RXZlbnRzKCk7aWYoXCJzdHJpbmdcIj09PWkpZGVsZXRlIG9bdF07ZWxzZSBpZih0IGluc3RhbmNlb2YgUmVnRXhwKWZvcihlIGluIG8pby5oYXNPd25Qcm9wZXJ0eShlKSYmdC50ZXN0KGUpJiZkZWxldGUgb1tlXTtlbHNlIGRlbGV0ZSB0aGlzLl9ldmVudHM7cmV0dXJuIHRoaXN9LG8ucmVtb3ZlQWxsTGlzdGVuZXJzPWkoXCJyZW1vdmVFdmVudFwiKSxvLmVtaXRFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBpLG8sbixyLHM9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdCh0KTtmb3IobiBpbiBzKWlmKHMuaGFzT3duUHJvcGVydHkobikpZm9yKG89c1tuXS5sZW5ndGg7by0tOylpPXNbbl1bb10saS5vbmNlPT09ITAmJnRoaXMucmVtb3ZlTGlzdGVuZXIodCxpLmxpc3RlbmVyKSxyPWkubGlzdGVuZXIuYXBwbHkodGhpcyxlfHxbXSkscj09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKHQsaS5saXN0ZW5lcik7cmV0dXJuIHRoaXN9LG8udHJpZ2dlcj1pKFwiZW1pdEV2ZW50XCIpLG8uZW1pdD1mdW5jdGlvbih0KXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMuZW1pdEV2ZW50KHQsZSl9LG8uc2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWU9dCx0aGlzfSxvLl9nZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShcIl9vbmNlUmV0dXJuVmFsdWVcIik/dGhpcy5fb25jZVJldHVyblZhbHVlOiEwfSxvLl9nZXRFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KX0sdC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIG4uRXZlbnRFbWl0dGVyPXIsdH0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixbXSxmdW5jdGlvbigpe3JldHVybiB0fSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dDpuLkV2ZW50RW1pdHRlcj10fS5jYWxsKHRoaXMpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7aWYodCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG9bdF0pcmV0dXJuIHQ7dD10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSk7Zm9yKHZhciBlLG49MCxyPWkubGVuZ3RoO3I+bjtuKyspaWYoZT1pW25dK3QsXCJzdHJpbmdcIj09dHlwZW9mIG9bZV0pcmV0dXJuIGV9fXZhciBpPVwiV2Via2l0IE1veiBtcyBNcyBPXCIuc3BsaXQoXCIgXCIpLG89ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWU6dC5nZXRTdHlsZVByb3BlcnR5PWV9KHdpbmRvdyksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXt2YXIgZT1wYXJzZUZsb2F0KHQpLGk9LTE9PT10LmluZGV4T2YoXCIlXCIpJiYhaXNOYU4oZSk7cmV0dXJuIGkmJmV9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBvKCl7Zm9yKHZhciB0PXt3aWR0aDowLGhlaWdodDowLGlubmVyV2lkdGg6MCxpbm5lckhlaWdodDowLG91dGVyV2lkdGg6MCxvdXRlckhlaWdodDowfSxlPTAsaT1zLmxlbmd0aDtpPmU7ZSsrKXt2YXIgbz1zW2VdO3Rbb109MH1yZXR1cm4gdH1mdW5jdGlvbiBuKGkpe2Z1bmN0aW9uIG4oKXtpZighZCl7ZD0hMDt2YXIgbz10LmdldENvbXB1dGVkU3R5bGU7aWYocD1mdW5jdGlvbigpe3ZhciB0PW8/ZnVuY3Rpb24odCl7cmV0dXJuIG8odCxudWxsKX06ZnVuY3Rpb24odCl7cmV0dXJuIHQuY3VycmVudFN0eWxlfTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIGk9dChlKTtyZXR1cm4gaXx8cihcIlN0eWxlIHJldHVybmVkIFwiK2krXCIuIEFyZSB5b3UgcnVubmluZyB0aGlzIGNvZGUgaW4gYSBoaWRkZW4gaWZyYW1lIG9uIEZpcmVmb3g/IFwiK1wiU2VlIGh0dHA6Ly9iaXQubHkvZ2V0c2l6ZWJ1ZzFcIiksaX19KCksaD1pKFwiYm94U2l6aW5nXCIpKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uc3R5bGUud2lkdGg9XCIyMDBweFwiLG4uc3R5bGUucGFkZGluZz1cIjFweCAycHggM3B4IDRweFwiLG4uc3R5bGUuYm9yZGVyU3R5bGU9XCJzb2xpZFwiLG4uc3R5bGUuYm9yZGVyV2lkdGg9XCIxcHggMnB4IDNweCA0cHhcIixuLnN0eWxlW2hdPVwiYm9yZGVyLWJveFwiO3ZhciBzPWRvY3VtZW50LmJvZHl8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtzLmFwcGVuZENoaWxkKG4pO3ZhciBhPXAobik7Zj0yMDA9PT1lKGEud2lkdGgpLHMucmVtb3ZlQ2hpbGQobil9fX1mdW5jdGlvbiBhKHQpe2lmKG4oKSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KSksdCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQubm9kZVR5cGUpe3ZhciBpPXAodCk7aWYoXCJub25lXCI9PT1pLmRpc3BsYXkpcmV0dXJuIG8oKTt2YXIgcj17fTtyLndpZHRoPXQub2Zmc2V0V2lkdGgsci5oZWlnaHQ9dC5vZmZzZXRIZWlnaHQ7Zm9yKHZhciBhPXIuaXNCb3JkZXJCb3g9ISghaHx8IWlbaF18fFwiYm9yZGVyLWJveFwiIT09aVtoXSksZD0wLGw9cy5sZW5ndGg7bD5kO2QrKyl7dmFyIGM9c1tkXSx5PWlbY107eT11KHQseSk7dmFyIG09cGFyc2VGbG9hdCh5KTtyW2NdPWlzTmFOKG0pPzA6bX12YXIgZz1yLnBhZGRpbmdMZWZ0K3IucGFkZGluZ1JpZ2h0LHY9ci5wYWRkaW5nVG9wK3IucGFkZGluZ0JvdHRvbSxfPXIubWFyZ2luTGVmdCtyLm1hcmdpblJpZ2h0LEk9ci5tYXJnaW5Ub3Arci5tYXJnaW5Cb3R0b20sTD1yLmJvcmRlckxlZnRXaWR0aCtyLmJvcmRlclJpZ2h0V2lkdGgsej1yLmJvcmRlclRvcFdpZHRoK3IuYm9yZGVyQm90dG9tV2lkdGgsYj1hJiZmLHg9ZShpLndpZHRoKTt4IT09ITEmJihyLndpZHRoPXgrKGI/MDpnK0wpKTt2YXIgUz1lKGkuaGVpZ2h0KTtyZXR1cm4gUyE9PSExJiYoci5oZWlnaHQ9UysoYj8wOnYreikpLHIuaW5uZXJXaWR0aD1yLndpZHRoLShnK0wpLHIuaW5uZXJIZWlnaHQ9ci5oZWlnaHQtKHYreiksci5vdXRlcldpZHRoPXIud2lkdGgrXyxyLm91dGVySGVpZ2h0PXIuaGVpZ2h0K0kscn19ZnVuY3Rpb24gdShlLGkpe2lmKHQuZ2V0Q29tcHV0ZWRTdHlsZXx8LTE9PT1pLmluZGV4T2YoXCIlXCIpKXJldHVybiBpO3ZhciBvPWUuc3R5bGUsbj1vLmxlZnQscj1lLnJ1bnRpbWVTdHlsZSxzPXImJnIubGVmdDtyZXR1cm4gcyYmKHIubGVmdD1lLmN1cnJlbnRTdHlsZS5sZWZ0KSxvLmxlZnQ9aSxpPW8ucGl4ZWxMZWZ0LG8ubGVmdD1uLHMmJihyLmxlZnQ9cyksaX12YXIgcCxoLGYsZD0hMTtyZXR1cm4gYX12YXIgcj1cInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZT9pOmZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IodCl9LHM9W1wicGFkZGluZ0xlZnRcIixcInBhZGRpbmdSaWdodFwiLFwicGFkZGluZ1RvcFwiLFwicGFkZGluZ0JvdHRvbVwiLFwibWFyZ2luTGVmdFwiLFwibWFyZ2luUmlnaHRcIixcIm1hcmdpblRvcFwiLFwibWFyZ2luQm90dG9tXCIsXCJib3JkZXJMZWZ0V2lkdGhcIixcImJvcmRlclJpZ2h0V2lkdGhcIixcImJvcmRlclRvcFdpZHRoXCIsXCJib3JkZXJCb3R0b21XaWR0aFwiXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZ2V0LXNpemUvZ2V0LXNpemVcIixbXCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5XCJdLG4pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPW4ocmVxdWlyZShcImRlc2FuZHJvLWdldC1zdHlsZS1wcm9wZXJ0eVwiKSk6dC5nZXRTaXplPW4odC5nZXRTdHlsZVByb3BlcnR5KX0od2luZG93KSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7cmV0dXJuIHRbc10oZSl9ZnVuY3Rpb24gaSh0KXtpZighdC5wYXJlbnROb2RlKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7ZS5hcHBlbmRDaGlsZCh0KX19ZnVuY3Rpb24gbyh0LGUpe2kodCk7Zm9yKHZhciBvPXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKGUpLG49MCxyPW8ubGVuZ3RoO3I+bjtuKyspaWYob1tuXT09PXQpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gbih0LG8pe3JldHVybiBpKHQpLGUodCxvKX12YXIgcixzPWZ1bmN0aW9uKCl7aWYodC5tYXRjaGVzU2VsZWN0b3IpcmV0dXJuXCJtYXRjaGVzU2VsZWN0b3JcIjtmb3IodmFyIGU9W1wid2Via2l0XCIsXCJtb3pcIixcIm1zXCIsXCJvXCJdLGk9MCxvPWUubGVuZ3RoO28+aTtpKyspe3ZhciBuPWVbaV0scj1uK1wiTWF0Y2hlc1NlbGVjdG9yXCI7aWYodFtyXSlyZXR1cm4gcn19KCk7aWYocyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx1PWUoYSxcImRpdlwiKTtyPXU/ZTpufWVsc2Ugcj1vO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3JcIixbXSxmdW5jdGlvbigpe3JldHVybiByfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9cjp3aW5kb3cubWF0Y2hlc1NlbGVjdG9yPXJ9KEVsZW1lbnQucHJvdG90eXBlKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciBpIGluIGUpdFtpXT1lW2ldO3JldHVybiB0fWZ1bmN0aW9uIGkodCl7Zm9yKHZhciBlIGluIHQpcmV0dXJuITE7cmV0dXJuIGU9bnVsbCwhMH1mdW5jdGlvbiBvKHQpe3JldHVybiB0LnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbih0KXtyZXR1cm5cIi1cIit0LnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBuKHQsbixyKXtmdW5jdGlvbiBhKHQsZSl7dCYmKHRoaXMuZWxlbWVudD10LHRoaXMubGF5b3V0PWUsdGhpcy5wb3NpdGlvbj17eDowLHk6MH0sdGhpcy5fY3JlYXRlKCkpfXZhciB1PXIoXCJ0cmFuc2l0aW9uXCIpLHA9cihcInRyYW5zZm9ybVwiKSxoPXUmJnAsZj0hIXIoXCJwZXJzcGVjdGl2ZVwiKSxkPXtXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvdHJhbnNpdGlvbmVuZFwiLHRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCJ9W3VdLGw9W1widHJhbnNmb3JtXCIsXCJ0cmFuc2l0aW9uXCIsXCJ0cmFuc2l0aW9uRHVyYXRpb25cIixcInRyYW5zaXRpb25Qcm9wZXJ0eVwiXSxjPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXt9LGU9MCxpPWwubGVuZ3RoO2k+ZTtlKyspe3ZhciBvPWxbZV0sbj1yKG8pO24mJm4hPT1vJiYodFtvXT1uKX1yZXR1cm4gdH0oKTtlKGEucHJvdG90eXBlLHQucHJvdG90eXBlKSxhLnByb3RvdHlwZS5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5fdHJhbnNuPXtpbmdQcm9wZXJ0aWVzOnt9LGNsZWFuOnt9LG9uRW5kOnt9fSx0aGlzLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSl9LGEucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPVwib25cIit0LnR5cGU7dGhpc1tlXSYmdGhpc1tlXSh0KX0sYS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1uKHRoaXMuZWxlbWVudCl9LGEucHJvdG90eXBlLmNzcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmVsZW1lbnQuc3R5bGU7Zm9yKHZhciBpIGluIHQpe3ZhciBvPWNbaV18fGk7ZVtvXT10W2ldfX0sYS5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgdD1zKHRoaXMuZWxlbWVudCksZT10aGlzLmxheW91dC5vcHRpb25zLGk9ZS5pc09yaWdpbkxlZnQsbz1lLmlzT3JpZ2luVG9wLG49cGFyc2VJbnQodFtpP1wibGVmdFwiOlwicmlnaHRcIl0sMTApLHI9cGFyc2VJbnQodFtvP1widG9wXCI6XCJib3R0b21cIl0sMTApO249aXNOYU4obik/MDpuLHI9aXNOYU4ocik/MDpyO3ZhciBhPXRoaXMubGF5b3V0LnNpemU7bi09aT9hLnBhZGRpbmdMZWZ0OmEucGFkZGluZ1JpZ2h0LHItPW8/YS5wYWRkaW5nVG9wOmEucGFkZGluZ0JvdHRvbSx0aGlzLnBvc2l0aW9uLng9bix0aGlzLnBvc2l0aW9uLnk9cn0sYS5wcm90b3R5cGUubGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxheW91dC5zaXplLGU9dGhpcy5sYXlvdXQub3B0aW9ucyxpPXt9O2UuaXNPcmlnaW5MZWZ0PyhpLmxlZnQ9dGhpcy5wb3NpdGlvbi54K3QucGFkZGluZ0xlZnQrXCJweFwiLGkucmlnaHQ9XCJcIik6KGkucmlnaHQ9dGhpcy5wb3NpdGlvbi54K3QucGFkZGluZ1JpZ2h0K1wicHhcIixpLmxlZnQ9XCJcIiksZS5pc09yaWdpblRvcD8oaS50b3A9dGhpcy5wb3NpdGlvbi55K3QucGFkZGluZ1RvcCtcInB4XCIsaS5ib3R0b209XCJcIik6KGkuYm90dG9tPXRoaXMucG9zaXRpb24ueSt0LnBhZGRpbmdCb3R0b20rXCJweFwiLGkudG9wPVwiXCIpLHRoaXMuY3NzKGkpLHRoaXMuZW1pdEV2ZW50KFwibGF5b3V0XCIsW3RoaXNdKX07dmFyIHk9Zj9mdW5jdGlvbih0LGUpe3JldHVyblwidHJhbnNsYXRlM2QoXCIrdCtcInB4LCBcIitlK1wicHgsIDApXCJ9OmZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJ0cmFuc2xhdGUoXCIrdCtcInB4LCBcIitlK1wicHgpXCJ9O2EucHJvdG90eXBlLl90cmFuc2l0aW9uVG89ZnVuY3Rpb24odCxlKXt0aGlzLmdldFBvc2l0aW9uKCk7dmFyIGk9dGhpcy5wb3NpdGlvbi54LG89dGhpcy5wb3NpdGlvbi55LG49cGFyc2VJbnQodCwxMCkscj1wYXJzZUludChlLDEwKSxzPW49PT10aGlzLnBvc2l0aW9uLngmJnI9PT10aGlzLnBvc2l0aW9uLnk7aWYodGhpcy5zZXRQb3NpdGlvbih0LGUpLHMmJiF0aGlzLmlzVHJhbnNpdGlvbmluZylyZXR1cm4gdGhpcy5sYXlvdXRQb3NpdGlvbigpLHZvaWQgMDt2YXIgYT10LWksdT1lLW8scD17fSxoPXRoaXMubGF5b3V0Lm9wdGlvbnM7YT1oLmlzT3JpZ2luTGVmdD9hOi1hLHU9aC5pc09yaWdpblRvcD91Oi11LHAudHJhbnNmb3JtPXkoYSx1KSx0aGlzLnRyYW5zaXRpb24oe3RvOnAsb25UcmFuc2l0aW9uRW5kOnt0cmFuc2Zvcm06dGhpcy5sYXlvdXRQb3NpdGlvbn0saXNDbGVhbmluZzohMH0pfSxhLnByb3RvdHlwZS5nb1RvPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZXRQb3NpdGlvbih0LGUpLHRoaXMubGF5b3V0UG9zaXRpb24oKX0sYS5wcm90b3R5cGUubW92ZVRvPWg/YS5wcm90b3R5cGUuX3RyYW5zaXRpb25UbzphLnByb3RvdHlwZS5nb1RvLGEucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5wb3NpdGlvbi54PXBhcnNlSW50KHQsMTApLHRoaXMucG9zaXRpb24ueT1wYXJzZUludChlLDEwKX0sYS5wcm90b3R5cGUuX25vblRyYW5zaXRpb249ZnVuY3Rpb24odCl7dGhpcy5jc3ModC50byksdC5pc0NsZWFuaW5nJiZ0aGlzLl9yZW1vdmVTdHlsZXModC50byk7Zm9yKHZhciBlIGluIHQub25UcmFuc2l0aW9uRW5kKXQub25UcmFuc2l0aW9uRW5kW2VdLmNhbGwodGhpcyl9LGEucHJvdG90eXBlLl90cmFuc2l0aW9uPWZ1bmN0aW9uKHQpe2lmKCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdGhpcy5fbm9uVHJhbnNpdGlvbih0KSx2b2lkIDA7dmFyIGU9dGhpcy5fdHJhbnNuO2Zvcih2YXIgaSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCllLm9uRW5kW2ldPXQub25UcmFuc2l0aW9uRW5kW2ldO2ZvcihpIGluIHQudG8pZS5pbmdQcm9wZXJ0aWVzW2ldPSEwLHQuaXNDbGVhbmluZyYmKGUuY2xlYW5baV09ITApO2lmKHQuZnJvbSl7dGhpcy5jc3ModC5mcm9tKTt2YXIgbz10aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O289bnVsbH10aGlzLmVuYWJsZVRyYW5zaXRpb24odC50byksdGhpcy5jc3ModC50byksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITB9O3ZhciBtPXAmJm8ocCkrXCIsb3BhY2l0eVwiO2EucHJvdG90eXBlLmVuYWJsZVRyYW5zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmlzVHJhbnNpdGlvbmluZ3x8KHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6bSx0cmFuc2l0aW9uRHVyYXRpb246dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb259KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkLHRoaXMsITEpKX0sYS5wcm90b3R5cGUudHJhbnNpdGlvbj1hLnByb3RvdHlwZVt1P1wiX3RyYW5zaXRpb25cIjpcIl9ub25UcmFuc2l0aW9uXCJdLGEucHJvdG90eXBlLm9ud2Via2l0VHJhbnNpdGlvbkVuZD1mdW5jdGlvbih0KXt0aGlzLm9udHJhbnNpdGlvbmVuZCh0KX0sYS5wcm90b3R5cGUub25vdHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXt0aGlzLm9udHJhbnNpdGlvbmVuZCh0KX07dmFyIGc9e1wiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwiLFwiLW1vei10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwiLFwiLW8tdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIn07YS5wcm90b3R5cGUub250cmFuc2l0aW9uZW5kPWZ1bmN0aW9uKHQpe2lmKHQudGFyZ2V0PT09dGhpcy5lbGVtZW50KXt2YXIgZT10aGlzLl90cmFuc24sbz1nW3QucHJvcGVydHlOYW1lXXx8dC5wcm9wZXJ0eU5hbWU7aWYoZGVsZXRlIGUuaW5nUHJvcGVydGllc1tvXSxpKGUuaW5nUHJvcGVydGllcykmJnRoaXMuZGlzYWJsZVRyYW5zaXRpb24oKSxvIGluIGUuY2xlYW4mJih0aGlzLmVsZW1lbnQuc3R5bGVbdC5wcm9wZXJ0eU5hbWVdPVwiXCIsZGVsZXRlIGUuY2xlYW5bb10pLG8gaW4gZS5vbkVuZCl7dmFyIG49ZS5vbkVuZFtvXTtuLmNhbGwodGhpcyksZGVsZXRlIGUub25FbmRbb119dGhpcy5lbWl0RXZlbnQoXCJ0cmFuc2l0aW9uRW5kXCIsW3RoaXNdKX19LGEucHJvdG90eXBlLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzKCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZCx0aGlzLCExKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMX0sYS5wcm90b3R5cGUuX3JlbW92ZVN0eWxlcz1mdW5jdGlvbih0KXt2YXIgZT17fTtmb3IodmFyIGkgaW4gdCllW2ldPVwiXCI7dGhpcy5jc3MoZSl9O3ZhciB2PXt0cmFuc2l0aW9uUHJvcGVydHk6XCJcIix0cmFuc2l0aW9uRHVyYXRpb246XCJcIn07cmV0dXJuIGEucHJvdG90eXBlLnJlbW92ZVRyYW5zaXRpb25TdHlsZXM9ZnVuY3Rpb24oKXt0aGlzLmNzcyh2KX0sYS5wcm90b3R5cGUucmVtb3ZlRWxlbT1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbWl0RXZlbnQoXCJyZW1vdmVcIixbdGhpc10pfSxhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtpZighdXx8IXBhcnNlRmxvYXQodGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24pKXJldHVybiB0aGlzLnJlbW92ZUVsZW0oKSx2b2lkIDA7dmFyIHQ9dGhpczt0aGlzLm9uKFwidHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHQucmVtb3ZlRWxlbSgpLCEwfSksdGhpcy5oaWRlKCl9LGEucHJvdG90eXBlLnJldmVhbD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmlzSGlkZGVuLHRoaXMuY3NzKHtkaXNwbGF5OlwiXCJ9KTt2YXIgdD10aGlzLmxheW91dC5vcHRpb25zO3RoaXMudHJhbnNpdGlvbih7ZnJvbTp0LmhpZGRlblN0eWxlLHRvOnQudmlzaWJsZVN0eWxlLGlzQ2xlYW5pbmc6ITB9KX0sYS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe3RoaXMuaXNIaWRkZW49ITAsdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pO3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOnQudmlzaWJsZVN0eWxlLHRvOnQuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6e29wYWNpdHk6ZnVuY3Rpb24oKXt0aGlzLmlzSGlkZGVuJiZ0aGlzLmNzcyh7ZGlzcGxheTpcIm5vbmVcIn0pfX19KX0sYS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY3NzKHtwb3NpdGlvbjpcIlwiLGxlZnQ6XCJcIixyaWdodDpcIlwiLHRvcDpcIlwiLGJvdHRvbTpcIlwiLHRyYW5zaXRpb246XCJcIix0cmFuc2Zvcm06XCJcIn0pfSxhfXZhciByPXQuZ2V0Q29tcHV0ZWRTdHlsZSxzPXI/ZnVuY3Rpb24odCl7cmV0dXJuIHIodCxudWxsKX06ZnVuY3Rpb24odCl7cmV0dXJuIHQuY3VycmVudFN0eWxlfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwib3V0bGF5ZXIvaXRlbVwiLFtcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImdldC1zaXplL2dldC1zaXplXCIsXCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5XCJdLG4pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPW4ocmVxdWlyZShcIndvbGZ5ODctZXZlbnRlbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZGVzYW5kcm8tZ2V0LXN0eWxlLXByb3BlcnR5XCIpKToodC5PdXRsYXllcj17fSx0Lk91dGxheWVyLkl0ZW09bih0LkV2ZW50RW1pdHRlcix0LmdldFNpemUsdC5nZXRTdHlsZVByb3BlcnR5KSl9KHdpbmRvdyksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUpe2Zvcih2YXIgaSBpbiBlKXRbaV09ZVtpXTtyZXR1cm4gdH1mdW5jdGlvbiBpKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PWYuY2FsbCh0KX1mdW5jdGlvbiBvKHQpe3ZhciBlPVtdO2lmKGkodCkpZT10O2Vsc2UgaWYodCYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RoKWZvcih2YXIgbz0wLG49dC5sZW5ndGg7bj5vO28rKyllLnB1c2godFtvXSk7ZWxzZSBlLnB1c2godCk7cmV0dXJuIGV9ZnVuY3Rpb24gbih0LGUpe3ZhciBpPWwoZSx0KTstMSE9PWkmJmUuc3BsaWNlKGksMSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdC5yZXBsYWNlKC8oLikoW0EtWl0pL2csZnVuY3Rpb24odCxlLGkpe3JldHVybiBlK1wiLVwiK2l9KS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHMoaSxzLGYsbCxjLHkpe2Z1bmN0aW9uIG0odCxpKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9YS5xdWVyeVNlbGVjdG9yKHQpKSwhdHx8IWQodCkpcmV0dXJuIHUmJnUuZXJyb3IoXCJCYWQgXCIrdGhpcy5jb25zdHJ1Y3Rvci5uYW1lc3BhY2UrXCIgZWxlbWVudDogXCIrdCksdm9pZCAwO3RoaXMuZWxlbWVudD10LHRoaXMub3B0aW9ucz1lKHt9LHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdHMpLHRoaXMub3B0aW9uKGkpO3ZhciBvPSsrZzt0aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlEPW8sdltvXT10aGlzLHRoaXMuX2NyZWF0ZSgpLHRoaXMub3B0aW9ucy5pc0luaXRMYXlvdXQmJnRoaXMubGF5b3V0KCl9dmFyIGc9MCx2PXt9O3JldHVybiBtLm5hbWVzcGFjZT1cIm91dGxheWVyXCIsbS5JdGVtPXksbS5kZWZhdWx0cz17Y29udGFpbmVyU3R5bGU6e3Bvc2l0aW9uOlwicmVsYXRpdmVcIn0saXNJbml0TGF5b3V0OiEwLGlzT3JpZ2luTGVmdDohMCxpc09yaWdpblRvcDohMCxpc1Jlc2l6ZUJvdW5kOiEwLGlzUmVzaXppbmdDb250YWluZXI6ITAsdHJhbnNpdGlvbkR1cmF0aW9uOlwiMC40c1wiLGhpZGRlblN0eWxlOntvcGFjaXR5OjAsdHJhbnNmb3JtOlwic2NhbGUoMC4wMDEpXCJ9LHZpc2libGVTdHlsZTp7b3BhY2l0eToxLHRyYW5zZm9ybTpcInNjYWxlKDEpXCJ9fSxlKG0ucHJvdG90eXBlLGYucHJvdG90eXBlKSxtLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24odCl7ZSh0aGlzLm9wdGlvbnMsdCl9LG0ucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLnJlbG9hZEl0ZW1zKCksdGhpcy5zdGFtcHM9W10sdGhpcy5zdGFtcCh0aGlzLm9wdGlvbnMuc3RhbXApLGUodGhpcy5lbGVtZW50LnN0eWxlLHRoaXMub3B0aW9ucy5jb250YWluZXJTdHlsZSksdGhpcy5vcHRpb25zLmlzUmVzaXplQm91bmQmJnRoaXMuYmluZFJlc2l6ZSgpfSxtLnByb3RvdHlwZS5yZWxvYWRJdGVtcz1mdW5jdGlvbigpe3RoaXMuaXRlbXM9dGhpcy5faXRlbWl6ZSh0aGlzLmVsZW1lbnQuY2hpbGRyZW4pfSxtLnByb3RvdHlwZS5faXRlbWl6ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cyh0KSxpPXRoaXMuY29uc3RydWN0b3IuSXRlbSxvPVtdLG49MCxyPWUubGVuZ3RoO3I+bjtuKyspe3ZhciBzPWVbbl0sYT1uZXcgaShzLHRoaXMpO28ucHVzaChhKX1yZXR1cm4gb30sbS5wcm90b3R5cGUuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHM9ZnVuY3Rpb24odCl7dD1vKHQpO2Zvcih2YXIgZT10aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yLGk9W10sbj0wLHI9dC5sZW5ndGg7cj5uO24rKyl7dmFyIHM9dFtuXTtpZihkKHMpKWlmKGUpe2MocyxlKSYmaS5wdXNoKHMpO2Zvcih2YXIgYT1zLnF1ZXJ5U2VsZWN0b3JBbGwoZSksdT0wLHA9YS5sZW5ndGg7cD51O3UrKylpLnB1c2goYVt1XSl9ZWxzZSBpLnB1c2gocyl9cmV0dXJuIGl9LG0ucHJvdG90eXBlLmdldEl0ZW1FbGVtZW50cz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTAsaT10aGlzLml0ZW1zLmxlbmd0aDtpPmU7ZSsrKXQucHVzaCh0aGlzLml0ZW1zW2VdLmVsZW1lbnQpO3JldHVybiB0fSxtLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpO3ZhciB0PXZvaWQgMCE9PXRoaXMub3B0aW9ucy5pc0xheW91dEluc3RhbnQ/dGhpcy5vcHRpb25zLmlzTGF5b3V0SW5zdGFudDohdGhpcy5faXNMYXlvdXRJbml0ZWQ7dGhpcy5sYXlvdXRJdGVtcyh0aGlzLml0ZW1zLHQpLHRoaXMuX2lzTGF5b3V0SW5pdGVkPSEwfSxtLnByb3RvdHlwZS5faW5pdD1tLnByb3RvdHlwZS5sYXlvdXQsbS5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5nZXRTaXplKCl9LG0ucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXt0aGlzLnNpemU9bCh0aGlzLmVsZW1lbnQpfSxtLnByb3RvdHlwZS5fZ2V0TWVhc3VyZW1lbnQ9ZnVuY3Rpb24odCxlKXt2YXIgaSxvPXRoaXMub3B0aW9uc1t0XTtvPyhcInN0cmluZ1wiPT10eXBlb2Ygbz9pPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKG8pOmQobykmJihpPW8pLHRoaXNbdF09aT9sKGkpW2VdOm8pOnRoaXNbdF09MH0sbS5wcm90b3R5cGUubGF5b3V0SXRlbXM9ZnVuY3Rpb24odCxlKXt0PXRoaXMuX2dldEl0ZW1zRm9yTGF5b3V0KHQpLHRoaXMuX2xheW91dEl0ZW1zKHQsZSksdGhpcy5fcG9zdExheW91dCgpfSxtLnByb3RvdHlwZS5fZ2V0SXRlbXNGb3JMYXlvdXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLGk9MCxvPXQubGVuZ3RoO28+aTtpKyspe3ZhciBuPXRbaV07bi5pc0lnbm9yZWR8fGUucHVzaChuKX1yZXR1cm4gZX0sbS5wcm90b3R5cGUuX2xheW91dEl0ZW1zPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe28uZW1pdEV2ZW50KFwibGF5b3V0Q29tcGxldGVcIixbbyx0XSl9dmFyIG89dGhpcztpZighdHx8IXQubGVuZ3RoKXJldHVybiBpKCksdm9pZCAwO3RoaXMuX2l0ZW1zT24odCxcImxheW91dFwiLGkpO2Zvcih2YXIgbj1bXSxyPTAscz10Lmxlbmd0aDtzPnI7cisrKXt2YXIgYT10W3JdLHU9dGhpcy5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKGEpO3UuaXRlbT1hLHUuaXNJbnN0YW50PWV8fGEuaXNMYXlvdXRJbnN0YW50LG4ucHVzaCh1KX10aGlzLl9wcm9jZXNzTGF5b3V0UXVldWUobil9LG0ucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm57eDowLHk6MH19LG0ucHJvdG90eXBlLl9wcm9jZXNzTGF5b3V0UXVldWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10Lmxlbmd0aDtpPmU7ZSsrKXt2YXIgbz10W2VdO3RoaXMuX3Bvc2l0aW9uSXRlbShvLml0ZW0sby54LG8ueSxvLmlzSW5zdGFudCl9fSxtLnByb3RvdHlwZS5fcG9zaXRpb25JdGVtPWZ1bmN0aW9uKHQsZSxpLG8pe28/dC5nb1RvKGUsaSk6dC5tb3ZlVG8oZSxpKX0sbS5wcm90b3R5cGUuX3Bvc3RMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZUNvbnRhaW5lcigpfSxtLnByb3RvdHlwZS5yZXNpemVDb250YWluZXI9ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaXNSZXNpemluZ0NvbnRhaW5lcil7dmFyIHQ9dGhpcy5fZ2V0Q29udGFpbmVyU2l6ZSgpO3QmJih0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKHQud2lkdGgsITApLHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUodC5oZWlnaHQsITEpKX19LG0ucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWgsbS5wcm90b3R5cGUuX3NldENvbnRhaW5lck1lYXN1cmU9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDAhPT10KXt2YXIgaT10aGlzLnNpemU7aS5pc0JvcmRlckJveCYmKHQrPWU/aS5wYWRkaW5nTGVmdCtpLnBhZGRpbmdSaWdodCtpLmJvcmRlckxlZnRXaWR0aCtpLmJvcmRlclJpZ2h0V2lkdGg6aS5wYWRkaW5nQm90dG9tK2kucGFkZGluZ1RvcCtpLmJvcmRlclRvcFdpZHRoK2kuYm9yZGVyQm90dG9tV2lkdGgpLHQ9TWF0aC5tYXgodCwwKSx0aGlzLmVsZW1lbnQuc3R5bGVbZT9cIndpZHRoXCI6XCJoZWlnaHRcIl09dCtcInB4XCJ9fSxtLnByb3RvdHlwZS5faXRlbXNPbj1mdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gbygpe3JldHVybiBuKyssbj09PXImJmkuY2FsbChzKSwhMH1mb3IodmFyIG49MCxyPXQubGVuZ3RoLHM9dGhpcyxhPTAsdT10Lmxlbmd0aDt1PmE7YSsrKXt2YXIgcD10W2FdO3Aub24oZSxvKX19LG0ucHJvdG90eXBlLmlnbm9yZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW0odCk7ZSYmKGUuaXNJZ25vcmVkPSEwKX0sbS5wcm90b3R5cGUudW5pZ25vcmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRJdGVtKHQpO2UmJmRlbGV0ZSBlLmlzSWdub3JlZH0sbS5wcm90b3R5cGUuc3RhbXA9ZnVuY3Rpb24odCl7aWYodD10aGlzLl9maW5kKHQpKXt0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQodCk7Zm9yKHZhciBlPTAsaT10Lmxlbmd0aDtpPmU7ZSsrKXt2YXIgbz10W2VdO3RoaXMuaWdub3JlKG8pfX19LG0ucHJvdG90eXBlLnVuc3RhbXA9ZnVuY3Rpb24odCl7aWYodD10aGlzLl9maW5kKHQpKWZvcih2YXIgZT0wLGk9dC5sZW5ndGg7aT5lO2UrKyl7dmFyIG89dFtlXTtuKG8sdGhpcy5zdGFtcHMpLHRoaXMudW5pZ25vcmUobyl9fSxtLnByb3RvdHlwZS5fZmluZD1mdW5jdGlvbih0KXtyZXR1cm4gdD8oXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKSx0PW8odCkpOnZvaWQgMH0sbS5wcm90b3R5cGUuX21hbmFnZVN0YW1wcz1mdW5jdGlvbigpe2lmKHRoaXMuc3RhbXBzJiZ0aGlzLnN0YW1wcy5sZW5ndGgpe3RoaXMuX2dldEJvdW5kaW5nUmVjdCgpO2Zvcih2YXIgdD0wLGU9dGhpcy5zdGFtcHMubGVuZ3RoO2U+dDt0Kyspe3ZhciBpPXRoaXMuc3RhbXBzW3RdO3RoaXMuX21hbmFnZVN0YW1wKGkpfX19LG0ucHJvdG90eXBlLl9nZXRCb3VuZGluZ1JlY3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZT10aGlzLnNpemU7dGhpcy5fYm91bmRpbmdSZWN0PXtsZWZ0OnQubGVmdCtlLnBhZGRpbmdMZWZ0K2UuYm9yZGVyTGVmdFdpZHRoLHRvcDp0LnRvcCtlLnBhZGRpbmdUb3ArZS5ib3JkZXJUb3BXaWR0aCxyaWdodDp0LnJpZ2h0LShlLnBhZGRpbmdSaWdodCtlLmJvcmRlclJpZ2h0V2lkdGgpLGJvdHRvbTp0LmJvdHRvbS0oZS5wYWRkaW5nQm90dG9tK2UuYm9yZGVyQm90dG9tV2lkdGgpfX0sbS5wcm90b3R5cGUuX21hbmFnZVN0YW1wPWgsbS5wcm90b3R5cGUuX2dldEVsZW1lbnRPZmZzZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPXRoaXMuX2JvdW5kaW5nUmVjdCxvPWwodCksbj17bGVmdDplLmxlZnQtaS5sZWZ0LW8ubWFyZ2luTGVmdCx0b3A6ZS50b3AtaS50b3Atby5tYXJnaW5Ub3AscmlnaHQ6aS5yaWdodC1lLnJpZ2h0LW8ubWFyZ2luUmlnaHQsYm90dG9tOmkuYm90dG9tLWUuYm90dG9tLW8ubWFyZ2luQm90dG9tfTtyZXR1cm4gbn0sbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJvblwiK3QudHlwZTt0aGlzW2VdJiZ0aGlzW2VdKHQpfSxtLnByb3RvdHlwZS5iaW5kUmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5pc1Jlc2l6ZUJvdW5kfHwoaS5iaW5kKHQsXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITApfSxtLnByb3RvdHlwZS51bmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJmkudW5iaW5kKHQsXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITF9LG0ucHJvdG90eXBlLm9ucmVzaXplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2UucmVzaXplKCksZGVsZXRlIGUucmVzaXplVGltZW91dH10aGlzLnJlc2l6ZVRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpO3ZhciBlPXRoaXM7dGhpcy5yZXNpemVUaW1lb3V0PXNldFRpbWVvdXQodCwxMDApfSxtLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJnRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSYmdGhpcy5sYXlvdXQoKX0sbS5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgdD1sKHRoaXMuZWxlbWVudCksZT10aGlzLnNpemUmJnQ7cmV0dXJuIGUmJnQuaW5uZXJXaWR0aCE9PXRoaXMuc2l6ZS5pbm5lcldpZHRofSxtLnByb3RvdHlwZS5hZGRJdGVtcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pdGVtaXplKHQpO3JldHVybiBlLmxlbmd0aCYmKHRoaXMuaXRlbXM9dGhpcy5pdGVtcy5jb25jYXQoZSkpLGV9LG0ucHJvdG90eXBlLmFwcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkSXRlbXModCk7ZS5sZW5ndGgmJih0aGlzLmxheW91dEl0ZW1zKGUsITApLHRoaXMucmV2ZWFsKGUpKX0sbS5wcm90b3R5cGUucHJlcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2l0ZW1pemUodCk7aWYoZS5sZW5ndGgpe3ZhciBpPXRoaXMuaXRlbXMuc2xpY2UoMCk7dGhpcy5pdGVtcz1lLmNvbmNhdChpKSx0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpLHRoaXMubGF5b3V0SXRlbXMoZSwhMCksdGhpcy5yZXZlYWwoZSksdGhpcy5sYXlvdXRJdGVtcyhpKX19LG0ucHJvdG90eXBlLnJldmVhbD1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Lmxlbmd0aDtpZihlKWZvcih2YXIgaT0wO2U+aTtpKyspe3ZhciBvPXRbaV07by5yZXZlYWwoKX19LG0ucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5sZW5ndGg7aWYoZSlmb3IodmFyIGk9MDtlPmk7aSsrKXt2YXIgbz10W2ldO28uaGlkZSgpfX0sbS5wcm90b3R5cGUuZ2V0SXRlbT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXRoaXMuaXRlbXMubGVuZ3RoO2k+ZTtlKyspe3ZhciBvPXRoaXMuaXRlbXNbZV07aWYoby5lbGVtZW50PT09dClyZXR1cm4gb319LG0ucHJvdG90eXBlLmdldEl0ZW1zPWZ1bmN0aW9uKHQpe2lmKHQmJnQubGVuZ3RoKXtmb3IodmFyIGU9W10saT0wLG89dC5sZW5ndGg7bz5pO2krKyl7dmFyIG49dFtpXSxyPXRoaXMuZ2V0SXRlbShuKTtyJiZlLnB1c2gocil9cmV0dXJuIGV9fSxtLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dD1vKHQpO3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7aWYoZSYmZS5sZW5ndGgpe3RoaXMuX2l0ZW1zT24oZSxcInJlbW92ZVwiLGZ1bmN0aW9uKCl7dGhpcy5lbWl0RXZlbnQoXCJyZW1vdmVDb21wbGV0ZVwiLFt0aGlzLGVdKX0pO2Zvcih2YXIgaT0wLHI9ZS5sZW5ndGg7cj5pO2krKyl7dmFyIHM9ZVtpXTtzLnJlbW92ZSgpLG4ocyx0aGlzLml0ZW1zKX19fSxtLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LnN0eWxlO3QuaGVpZ2h0PVwiXCIsdC5wb3NpdGlvbj1cIlwiLHQud2lkdGg9XCJcIjtmb3IodmFyIGU9MCxpPXRoaXMuaXRlbXMubGVuZ3RoO2k+ZTtlKyspe3ZhciBvPXRoaXMuaXRlbXNbZV07by5kZXN0cm95KCl9dGhpcy51bmJpbmRSZXNpemUoKTt2YXIgbj10aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlEO2RlbGV0ZSB2W25dLGRlbGV0ZSB0aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlELHAmJnAucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsdGhpcy5jb25zdHJ1Y3Rvci5uYW1lc3BhY2UpfSxtLmRhdGE9ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5vdXRsYXllckdVSUQ7cmV0dXJuIGUmJnZbZV19LG0uY3JlYXRlPWZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gbygpe20uYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBPYmplY3QuY3JlYXRlP28ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobS5wcm90b3R5cGUpOmUoby5wcm90b3R5cGUsbS5wcm90b3R5cGUpLG8ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW8sby5kZWZhdWx0cz1lKHt9LG0uZGVmYXVsdHMpLGUoby5kZWZhdWx0cyxpKSxvLnByb3RvdHlwZS5zZXR0aW5ncz17fSxvLm5hbWVzcGFjZT10LG8uZGF0YT1tLmRhdGEsby5JdGVtPWZ1bmN0aW9uKCl7eS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG8uSXRlbS5wcm90b3R5cGU9bmV3IHkscyhmdW5jdGlvbigpe2Zvcih2YXIgZT1yKHQpLGk9YS5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLVwiK2UpLG49XCJkYXRhLVwiK2UrXCItb3B0aW9uc1wiLHM9MCxoPWkubGVuZ3RoO2g+cztzKyspe3ZhciBmLGQ9aVtzXSxsPWQuZ2V0QXR0cmlidXRlKG4pO3RyeXtmPWwmJkpTT04ucGFyc2UobCl9Y2F0Y2goYyl7dSYmdS5lcnJvcihcIkVycm9yIHBhcnNpbmcgXCIrbitcIiBvbiBcIitkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkrKGQuaWQ/XCIjXCIrZC5pZDpcIlwiKStcIjogXCIrYyk7Y29udGludWV9dmFyIHk9bmV3IG8oZCxmKTtwJiZwLmRhdGEoZCx0LHkpfX0pLHAmJnAuYnJpZGdldCYmcC5icmlkZ2V0KHQsbyksb30sbS5JdGVtPXksbX12YXIgYT10LmRvY3VtZW50LHU9dC5jb25zb2xlLHA9dC5qUXVlcnksaD1mdW5jdGlvbigpe30sZj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGQ9XCJmdW5jdGlvblwiPT10eXBlb2YgSFRNTEVsZW1lbnR8fFwib2JqZWN0XCI9PXR5cGVvZiBIVE1MRWxlbWVudD9mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJjE9PT10Lm5vZGVUeXBlJiZcInN0cmluZ1wiPT10eXBlb2YgdC5ub2RlTmFtZX0sbD1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbih0LGUpe3JldHVybiB0LmluZGV4T2YoZSl9OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtvPmk7aSsrKWlmKHRbaV09PT1lKXJldHVybiBpO3JldHVybi0xfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwib3V0bGF5ZXIvb3V0bGF5ZXJcIixbXCJldmVudGllL2V2ZW50aWVcIixcImRvYy1yZWFkeS9kb2MtcmVhZHlcIixcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImdldC1zaXplL2dldC1zaXplXCIsXCJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3JcIixcIi4vaXRlbVwiXSxzKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1zKHJlcXVpcmUoXCJldmVudGllXCIpLHJlcXVpcmUoXCJkb2MtcmVhZHlcIikscmVxdWlyZShcIndvbGZ5ODctZXZlbnRlbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvclwiKSxyZXF1aXJlKFwiLi9pdGVtXCIpKTp0Lk91dGxheWVyPXModC5ldmVudGllLHQuZG9jUmVhZHksdC5FdmVudEVtaXR0ZXIsdC5nZXRTaXplLHQubWF0Y2hlc1NlbGVjdG9yLHQuT3V0bGF5ZXIuSXRlbSl9KHdpbmRvdyksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtmdW5jdGlvbiBlKCl7dC5JdGVtLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lLnByb3RvdHlwZT1uZXcgdC5JdGVtLGUucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLmlkPXRoaXMubGF5b3V0Lml0ZW1HVUlEKyssdC5JdGVtLnByb3RvdHlwZS5fY3JlYXRlLmNhbGwodGhpcyksdGhpcy5zb3J0RGF0YT17fX0sZS5wcm90b3R5cGUudXBkYXRlU29ydERhdGE9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0lnbm9yZWQpe3RoaXMuc29ydERhdGEuaWQ9dGhpcy5pZCx0aGlzLnNvcnREYXRhW1wib3JpZ2luYWwtb3JkZXJcIl09dGhpcy5pZCx0aGlzLnNvcnREYXRhLnJhbmRvbT1NYXRoLnJhbmRvbSgpO3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnMuZ2V0U29ydERhdGEsZT10aGlzLmxheW91dC5fc29ydGVycztmb3IodmFyIGkgaW4gdCl7dmFyIG89ZVtpXTt0aGlzLnNvcnREYXRhW2ldPW8odGhpcy5lbGVtZW50LHRoaXMpfX19O3ZhciBpPWUucHJvdG90eXBlLmRlc3Ryb3k7cmV0dXJuIGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSl9LGV9XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUvanMvaXRlbVwiLFtcIm91dGxheWVyL291dGxheWVyXCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcIm91dGxheWVyXCIpKToodC5Jc290b3BlPXQuSXNvdG9wZXx8e30sdC5Jc290b3BlLkl0ZW09ZSh0Lk91dGxheWVyKSl9KHdpbmRvdyksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUpe2Z1bmN0aW9uIGkodCl7dGhpcy5pc290b3BlPXQsdCYmKHRoaXMub3B0aW9ucz10Lm9wdGlvbnNbdGhpcy5uYW1lc3BhY2VdLHRoaXMuZWxlbWVudD10LmVsZW1lbnQsdGhpcy5pdGVtcz10LmZpbHRlcmVkSXRlbXMsdGhpcy5zaXplPXQuc2l6ZSl9cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5wcm90b3R5cGVbdF0uYXBwbHkodGhpcy5pc290b3BlLGFyZ3VtZW50cyl9fWZvcih2YXIgbz1bXCJfcmVzZXRMYXlvdXRcIixcIl9nZXRJdGVtTGF5b3V0UG9zaXRpb25cIixcIl9tYW5hZ2VTdGFtcFwiLFwiX2dldENvbnRhaW5lclNpemVcIixcIl9nZXRFbGVtZW50T2Zmc2V0XCIsXCJuZWVkc1Jlc2l6ZUxheW91dFwiXSxuPTAscj1vLmxlbmd0aDtyPm47bisrKXt2YXIgcz1vW25dO2kucHJvdG90eXBlW3NdPXQocyl9fSgpLGkucHJvdG90eXBlLm5lZWRzVmVydGljYWxSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMuaXNvdG9wZS5lbGVtZW50KSxpPXRoaXMuaXNvdG9wZS5zaXplJiZlO3JldHVybiBpJiZlLmlubmVySGVpZ2h0IT09dGhpcy5pc290b3BlLnNpemUuaW5uZXJIZWlnaHR9LGkucHJvdG90eXBlLl9nZXRNZWFzdXJlbWVudD1mdW5jdGlvbigpe3RoaXMuaXNvdG9wZS5fZ2V0TWVhc3VyZW1lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLnByb3RvdHlwZS5nZXRDb2x1bW5XaWR0aD1mdW5jdGlvbigpe3RoaXMuZ2V0U2VnbWVudFNpemUoXCJjb2x1bW5cIixcIldpZHRoXCIpfSxpLnByb3RvdHlwZS5nZXRSb3dIZWlnaHQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNlZ21lbnRTaXplKFwicm93XCIsXCJIZWlnaHRcIil9LGkucHJvdG90eXBlLmdldFNlZ21lbnRTaXplPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dCtlLG89XCJvdXRlclwiK2U7aWYodGhpcy5fZ2V0TWVhc3VyZW1lbnQoaSxvKSwhdGhpc1tpXSl7dmFyIG49dGhpcy5nZXRGaXJzdEl0ZW1TaXplKCk7dGhpc1tpXT1uJiZuW29dfHx0aGlzLmlzb3RvcGUuc2l6ZVtcImlubmVyXCIrZV19fSxpLnByb3RvdHlwZS5nZXRGaXJzdEl0ZW1TaXplPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pc290b3BlLmZpbHRlcmVkSXRlbXNbMF07cmV0dXJuIGUmJmUuZWxlbWVudCYmdChlLmVsZW1lbnQpfSxpLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmlzb3RvcGUubGF5b3V0LmFwcGx5KHRoaXMuaXNvdG9wZSxhcmd1bWVudHMpfSxpLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5pc290b3BlLmdldFNpemUoKSx0aGlzLnNpemU9dGhpcy5pc290b3BlLnNpemV9LGkubW9kZXM9e30saS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBvKCl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG8ucHJvdG90eXBlPW5ldyBpLGUmJihvLm9wdGlvbnM9ZSksby5wcm90b3R5cGUubmFtZXNwYWNlPXQsaS5tb2Rlc1t0XT1vLG99LGl9XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVcIixbXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwib3V0bGF5ZXIvb3V0bGF5ZXJcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcIm91dGxheWVyXCIpKToodC5Jc290b3BlPXQuSXNvdG9wZXx8e30sdC5Jc290b3BlLkxheW91dE1vZGU9ZSh0LmdldFNpemUsdC5PdXRsYXllcikpfSh3aW5kb3cpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxlKXt2YXIgbz10LmNyZWF0ZShcIm1hc29ucnlcIik7cmV0dXJuIG8ucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMuZ2V0U2l6ZSgpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiY29sdW1uV2lkdGhcIixcIm91dGVyV2lkdGhcIiksdGhpcy5fZ2V0TWVhc3VyZW1lbnQoXCJndXR0ZXJcIixcIm91dGVyV2lkdGhcIiksdGhpcy5tZWFzdXJlQ29sdW1ucygpO3ZhciB0PXRoaXMuY29scztmb3IodGhpcy5jb2xZcz1bXTt0LS07KXRoaXMuY29sWXMucHVzaCgwKTt0aGlzLm1heFk9MH0sby5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnM9ZnVuY3Rpb24oKXtpZih0aGlzLmdldENvbnRhaW5lcldpZHRoKCksIXRoaXMuY29sdW1uV2lkdGgpe3ZhciB0PXRoaXMuaXRlbXNbMF0saT10JiZ0LmVsZW1lbnQ7dGhpcy5jb2x1bW5XaWR0aD1pJiZlKGkpLm91dGVyV2lkdGh8fHRoaXMuY29udGFpbmVyV2lkdGh9dGhpcy5jb2x1bW5XaWR0aCs9dGhpcy5ndXR0ZXIsdGhpcy5jb2xzPU1hdGguZmxvb3IoKHRoaXMuY29udGFpbmVyV2lkdGgrdGhpcy5ndXR0ZXIpL3RoaXMuY29sdW1uV2lkdGgpLHRoaXMuY29scz1NYXRoLm1heCh0aGlzLmNvbHMsMSl9LG8ucHJvdG90eXBlLmdldENvbnRhaW5lcldpZHRoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmlzRml0V2lkdGg/dGhpcy5lbGVtZW50LnBhcmVudE5vZGU6dGhpcy5lbGVtZW50LGk9ZSh0KTt0aGlzLmNvbnRhaW5lcldpZHRoPWkmJmkuaW5uZXJXaWR0aH0sby5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbih0KXt0LmdldFNpemUoKTt2YXIgZT10LnNpemUub3V0ZXJXaWR0aCV0aGlzLmNvbHVtbldpZHRoLG89ZSYmMT5lP1wicm91bmRcIjpcImNlaWxcIixuPU1hdGhbb10odC5zaXplLm91dGVyV2lkdGgvdGhpcy5jb2x1bW5XaWR0aCk7bj1NYXRoLm1pbihuLHRoaXMuY29scyk7Zm9yKHZhciByPXRoaXMuX2dldENvbEdyb3VwKG4pLHM9TWF0aC5taW4uYXBwbHkoTWF0aCxyKSxhPWkocixzKSx1PXt4OnRoaXMuY29sdW1uV2lkdGgqYSx5OnN9LHA9cyt0LnNpemUub3V0ZXJIZWlnaHQsaD10aGlzLmNvbHMrMS1yLmxlbmd0aCxmPTA7aD5mO2YrKyl0aGlzLmNvbFlzW2ErZl09cDtyZXR1cm4gdX0sby5wcm90b3R5cGUuX2dldENvbEdyb3VwPWZ1bmN0aW9uKHQpe2lmKDI+dClyZXR1cm4gdGhpcy5jb2xZcztmb3IodmFyIGU9W10saT10aGlzLmNvbHMrMS10LG89MDtpPm87bysrKXt2YXIgbj10aGlzLmNvbFlzLnNsaWNlKG8sbyt0KTtlW29dPU1hdGgubWF4LmFwcGx5KE1hdGgsbil9cmV0dXJuIGV9LG8ucHJvdG90eXBlLl9tYW5hZ2VTdGFtcD1mdW5jdGlvbih0KXt2YXIgaT1lKHQpLG89dGhpcy5fZ2V0RWxlbWVudE9mZnNldCh0KSxuPXRoaXMub3B0aW9ucy5pc09yaWdpbkxlZnQ/by5sZWZ0Om8ucmlnaHQscj1uK2kub3V0ZXJXaWR0aCxzPU1hdGguZmxvb3Iobi90aGlzLmNvbHVtbldpZHRoKTtzPU1hdGgubWF4KDAscyk7dmFyIGE9TWF0aC5mbG9vcihyL3RoaXMuY29sdW1uV2lkdGgpO2EtPXIldGhpcy5jb2x1bW5XaWR0aD8wOjEsYT1NYXRoLm1pbih0aGlzLmNvbHMtMSxhKTtmb3IodmFyIHU9KHRoaXMub3B0aW9ucy5pc09yaWdpblRvcD9vLnRvcDpvLmJvdHRvbSkraS5vdXRlckhlaWdodCxwPXM7YT49cDtwKyspdGhpcy5jb2xZc1twXT1NYXRoLm1heCh1LHRoaXMuY29sWXNbcF0pfSxvLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3RoaXMubWF4WT1NYXRoLm1heC5hcHBseShNYXRoLHRoaXMuY29sWXMpO3ZhciB0PXtoZWlnaHQ6dGhpcy5tYXhZfTtyZXR1cm4gdGhpcy5vcHRpb25zLmlzRml0V2lkdGgmJih0LndpZHRoPXRoaXMuX2dldENvbnRhaW5lckZpdFdpZHRoKCkpLHR9LG8ucHJvdG90eXBlLl9nZXRDb250YWluZXJGaXRXaWR0aD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5jb2xzOy0tZSYmMD09PXRoaXMuY29sWXNbZV07KXQrKztyZXR1cm4odGhpcy5jb2xzLXQpKnRoaXMuY29sdW1uV2lkdGgtdGhpcy5ndXR0ZXJ9LG8ucHJvdG90eXBlLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250YWluZXJXaWR0aDtyZXR1cm4gdGhpcy5nZXRDb250YWluZXJXaWR0aCgpLHQhPT10aGlzLmNvbnRhaW5lcldpZHRofSxvfXZhciBpPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5kZXhPZihlKX06ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MCxvPXQubGVuZ3RoO28+aTtpKyspe3ZhciBuPXRbaV07aWYobj09PWUpcmV0dXJuIGl9cmV0dXJuLTF9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJtYXNvbnJ5L21hc29ucnlcIixbXCJvdXRsYXllci9vdXRsYXllclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwib3V0bGF5ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpKTp0Lk1hc29ucnk9ZSh0Lk91dGxheWVyLHQuZ2V0U2l6ZSl9KHdpbmRvdyksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUpe2Zvcih2YXIgaSBpbiBlKXRbaV09ZVtpXTtyZXR1cm4gdH1mdW5jdGlvbiBpKHQsaSl7dmFyIG89dC5jcmVhdGUoXCJtYXNvbnJ5XCIpLG49by5wcm90b3R5cGUuX2dldEVsZW1lbnRPZmZzZXQscj1vLnByb3RvdHlwZS5sYXlvdXQscz1vLnByb3RvdHlwZS5fZ2V0TWVhc3VyZW1lbnQ7ZShvLnByb3RvdHlwZSxpLnByb3RvdHlwZSksby5wcm90b3R5cGUuX2dldEVsZW1lbnRPZmZzZXQ9bixvLnByb3RvdHlwZS5sYXlvdXQ9cixvLnByb3RvdHlwZS5fZ2V0TWVhc3VyZW1lbnQ9czt2YXIgYT1vLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1ucztvLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe3RoaXMuaXRlbXM9dGhpcy5pc290b3BlLmZpbHRlcmVkSXRlbXMsYS5jYWxsKHRoaXMpfTt2YXIgdT1vLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA7cmV0dXJuIG8ucHJvdG90eXBlLl9tYW5hZ2VTdGFtcD1mdW5jdGlvbigpe3RoaXMub3B0aW9ucy5pc09yaWdpbkxlZnQ9dGhpcy5pc290b3BlLm9wdGlvbnMuaXNPcmlnaW5MZWZ0LHRoaXMub3B0aW9ucy5pc09yaWdpblRvcD10aGlzLmlzb3RvcGUub3B0aW9ucy5pc09yaWdpblRvcCx1LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb31cImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeVwiLFtcIi4uL2xheW91dC1tb2RlXCIsXCJtYXNvbnJ5L21hc29ucnlcIl0saSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9aShyZXF1aXJlKFwiLi4vbGF5b3V0LW1vZGVcIikscmVxdWlyZShcIm1hc29ucnktbGF5b3V0XCIpKTppKHQuSXNvdG9wZS5MYXlvdXRNb2RlLHQuTWFzb25yeSl9KHdpbmRvdyksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXt2YXIgZT10LmNyZWF0ZShcImZpdFJvd3NcIik7cmV0dXJuIGUucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMueD0wLHRoaXMueT0wLHRoaXMubWF4WT0wLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiZ3V0dGVyXCIsXCJvdXRlcldpZHRoXCIpfSxlLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3QuZ2V0U2l6ZSgpO3ZhciBlPXQuc2l6ZS5vdXRlcldpZHRoK3RoaXMuZ3V0dGVyLGk9dGhpcy5pc290b3BlLnNpemUuaW5uZXJXaWR0aCt0aGlzLmd1dHRlcjswIT09dGhpcy54JiZlK3RoaXMueD5pJiYodGhpcy54PTAsdGhpcy55PXRoaXMubWF4WSk7dmFyIG89e3g6dGhpcy54LHk6dGhpcy55fTtyZXR1cm4gdGhpcy5tYXhZPU1hdGgubWF4KHRoaXMubWF4WSx0aGlzLnkrdC5zaXplLm91dGVySGVpZ2h0KSx0aGlzLngrPWUsb30sZS5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXtyZXR1cm57aGVpZ2h0OnRoaXMubWF4WX19LGV9XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL2ZpdC1yb3dzXCIsW1wiLi4vbGF5b3V0LW1vZGVcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiLi4vbGF5b3V0LW1vZGVcIikpOmUodC5Jc290b3BlLkxheW91dE1vZGUpfSh3aW5kb3cpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7dmFyIGU9dC5jcmVhdGUoXCJ2ZXJ0aWNhbFwiLHtob3Jpem9udGFsQWxpZ25tZW50OjB9KTtyZXR1cm4gZS5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy55PTB9LGUucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24odCl7dC5nZXRTaXplKCk7dmFyIGU9KHRoaXMuaXNvdG9wZS5zaXplLmlubmVyV2lkdGgtdC5zaXplLm91dGVyV2lkdGgpKnRoaXMub3B0aW9ucy5ob3Jpem9udGFsQWxpZ25tZW50LGk9dGhpcy55O3JldHVybiB0aGlzLnkrPXQuc2l6ZS5vdXRlckhlaWdodCx7eDplLHk6aX19LGUucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7cmV0dXJue2hlaWdodDp0aGlzLnl9fSxlfVwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlL2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiLFtcIi4uL2xheW91dC1tb2RlXCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcIi4uL2xheW91dC1tb2RlXCIpKTplKHQuSXNvdG9wZS5MYXlvdXRNb2RlKX0od2luZG93KSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7Zm9yKHZhciBpIGluIGUpdFtpXT1lW2ldO3JldHVybiB0fWZ1bmN0aW9uIGkodCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09aC5jYWxsKHQpfWZ1bmN0aW9uIG8odCl7dmFyIGU9W107aWYoaSh0KSllPXQ7ZWxzZSBpZih0JiZcIm51bWJlclwiPT10eXBlb2YgdC5sZW5ndGgpZm9yKHZhciBvPTAsbj10Lmxlbmd0aDtuPm87bysrKWUucHVzaCh0W29dKTtlbHNlIGUucHVzaCh0KTtyZXR1cm4gZX1mdW5jdGlvbiBuKHQsZSl7dmFyIGk9ZihlLHQpOy0xIT09aSYmZS5zcGxpY2UoaSwxKX1mdW5jdGlvbiByKHQsaSxyLHUsaCl7ZnVuY3Rpb24gZih0LGUpe3JldHVybiBmdW5jdGlvbihpLG8pe2Zvcih2YXIgbj0wLHI9dC5sZW5ndGg7cj5uO24rKyl7dmFyIHM9dFtuXSxhPWkuc29ydERhdGFbc10sdT1vLnNvcnREYXRhW3NdO2lmKGE+dXx8dT5hKXt2YXIgcD12b2lkIDAhPT1lW3NdP2Vbc106ZSxoPXA/MTotMTtyZXR1cm4oYT51PzE6LTEpKmh9fXJldHVybiAwfX12YXIgZD10LmNyZWF0ZShcImlzb3RvcGVcIix7bGF5b3V0TW9kZTpcIm1hc29ucnlcIixpc0pRdWVyeUZpbHRlcmluZzohMCxzb3J0QXNjZW5kaW5nOiEwfSk7ZC5JdGVtPXUsZC5MYXlvdXRNb2RlPWgsZC5wcm90b3R5cGUuX2NyZWF0ZT1mdW5jdGlvbigpe3RoaXMuaXRlbUdVSUQ9MCx0aGlzLl9zb3J0ZXJzPXt9LHRoaXMuX2dldFNvcnRlcnMoKSx0LnByb3RvdHlwZS5fY3JlYXRlLmNhbGwodGhpcyksdGhpcy5tb2Rlcz17fSx0aGlzLmZpbHRlcmVkSXRlbXM9dGhpcy5pdGVtcyx0aGlzLnNvcnRIaXN0b3J5PVtcIm9yaWdpbmFsLW9yZGVyXCJdO2Zvcih2YXIgZSBpbiBoLm1vZGVzKXRoaXMuX2luaXRMYXlvdXRNb2RlKGUpfSxkLnByb3RvdHlwZS5yZWxvYWRJdGVtcz1mdW5jdGlvbigpe3RoaXMuaXRlbUdVSUQ9MCx0LnByb3RvdHlwZS5yZWxvYWRJdGVtcy5jYWxsKHRoaXMpfSxkLnByb3RvdHlwZS5faXRlbWl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10LnByb3RvdHlwZS5faXRlbWl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT0wLG89ZS5sZW5ndGg7bz5pO2krKyl7dmFyIG49ZVtpXTtuLmlkPXRoaXMuaXRlbUdVSUQrK31yZXR1cm4gdGhpcy5fdXBkYXRlSXRlbXNTb3J0RGF0YShlKSxlXG59LGQucHJvdG90eXBlLl9pbml0TGF5b3V0TW9kZT1mdW5jdGlvbih0KXt2YXIgaT1oLm1vZGVzW3RdLG89dGhpcy5vcHRpb25zW3RdfHx7fTt0aGlzLm9wdGlvbnNbdF09aS5vcHRpb25zP2UoaS5vcHRpb25zLG8pOm8sdGhpcy5tb2Rlc1t0XT1uZXcgaSh0aGlzKX0sZC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2lzTGF5b3V0SW5pdGVkJiZ0aGlzLm9wdGlvbnMuaXNJbml0TGF5b3V0Pyh0aGlzLmFycmFuZ2UoKSx2b2lkIDApOih0aGlzLl9sYXlvdXQoKSx2b2lkIDApfSxkLnByb3RvdHlwZS5fbGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0SXNJbnN0YW50KCk7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKSx0aGlzLmxheW91dEl0ZW1zKHRoaXMuZmlsdGVyZWRJdGVtcyx0KSx0aGlzLl9pc0xheW91dEluaXRlZD0hMH0sZC5wcm90b3R5cGUuYXJyYW5nZT1mdW5jdGlvbih0KXt0aGlzLm9wdGlvbih0KSx0aGlzLl9nZXRJc0luc3RhbnQoKSx0aGlzLmZpbHRlcmVkSXRlbXM9dGhpcy5fZmlsdGVyKHRoaXMuaXRlbXMpLHRoaXMuX3NvcnQoKSx0aGlzLl9sYXlvdXQoKX0sZC5wcm90b3R5cGUuX2luaXQ9ZC5wcm90b3R5cGUuYXJyYW5nZSxkLnByb3RvdHlwZS5fZ2V0SXNJbnN0YW50PWZ1bmN0aW9uKCl7dmFyIHQ9dm9pZCAwIT09dGhpcy5vcHRpb25zLmlzTGF5b3V0SW5zdGFudD90aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50OiF0aGlzLl9pc0xheW91dEluaXRlZDtyZXR1cm4gdGhpcy5faXNJbnN0YW50PXQsdH0sZC5wcm90b3R5cGUuX2ZpbHRlcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7Zi5yZXZlYWwobiksZi5oaWRlKHIpfXZhciBpPXRoaXMub3B0aW9ucy5maWx0ZXI7aT1pfHxcIipcIjtmb3IodmFyIG89W10sbj1bXSxyPVtdLHM9dGhpcy5fZ2V0RmlsdGVyVGVzdChpKSxhPTAsdT10Lmxlbmd0aDt1PmE7YSsrKXt2YXIgcD10W2FdO2lmKCFwLmlzSWdub3JlZCl7dmFyIGg9cyhwKTtoJiZvLnB1c2gocCksaCYmcC5pc0hpZGRlbj9uLnB1c2gocCk6aHx8cC5pc0hpZGRlbnx8ci5wdXNoKHApfX12YXIgZj10aGlzO3JldHVybiB0aGlzLl9pc0luc3RhbnQ/dGhpcy5fbm9UcmFuc2l0aW9uKGUpOmUoKSxvfSxkLnByb3RvdHlwZS5fZ2V0RmlsdGVyVGVzdD1mdW5jdGlvbih0KXtyZXR1cm4gcyYmdGhpcy5vcHRpb25zLmlzSlF1ZXJ5RmlsdGVyaW5nP2Z1bmN0aW9uKGUpe3JldHVybiBzKGUuZWxlbWVudCkuaXModCl9OlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZS5lbGVtZW50KX06ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZS5lbGVtZW50LHQpfX0sZC5wcm90b3R5cGUudXBkYXRlU29ydERhdGE9ZnVuY3Rpb24odCl7dmFyIGU7dD8odD1vKHQpLGU9dGhpcy5nZXRJdGVtcyh0KSk6ZT10aGlzLml0ZW1zLHRoaXMuX2dldFNvcnRlcnMoKSx0aGlzLl91cGRhdGVJdGVtc1NvcnREYXRhKGUpfSxkLnByb3RvdHlwZS5fZ2V0U29ydGVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5nZXRTb3J0RGF0YTtmb3IodmFyIGUgaW4gdCl7dmFyIGk9dFtlXTt0aGlzLl9zb3J0ZXJzW2VdPWwoaSl9fSxkLnByb3RvdHlwZS5fdXBkYXRlSXRlbXNTb3J0RGF0YT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dCYmdC5sZW5ndGgsaT0wO2UmJmU+aTtpKyspe3ZhciBvPXRbaV07by51cGRhdGVTb3J0RGF0YSgpfX07dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiB0O3ZhciBpPWEodCkuc3BsaXQoXCIgXCIpLG89aVswXSxuPW8ubWF0Y2goL15cXFsoLispXFxdJC8pLHI9biYmblsxXSxzPWUocixvKSx1PWQuc29ydERhdGFQYXJzZXJzW2lbMV1dO3JldHVybiB0PXU/ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnUocyh0KSl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZzKHQpfX1mdW5jdGlvbiBlKHQsZSl7dmFyIGk7cmV0dXJuIGk9dD9mdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCl9OmZ1bmN0aW9uKHQpe3ZhciBpPXQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gaSYmcChpKX19cmV0dXJuIHR9KCk7ZC5zb3J0RGF0YVBhcnNlcnM9e3BhcnNlSW50OmZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX0scGFyc2VGbG9hdDpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VGbG9hdCh0KX19LGQucHJvdG90eXBlLl9zb3J0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnNvcnRCeTtpZih0KXt2YXIgZT1bXS5jb25jYXQuYXBwbHkodCx0aGlzLnNvcnRIaXN0b3J5KSxpPWYoZSx0aGlzLm9wdGlvbnMuc29ydEFzY2VuZGluZyk7dGhpcy5maWx0ZXJlZEl0ZW1zLnNvcnQoaSksdCE9PXRoaXMuc29ydEhpc3RvcnlbMF0mJnRoaXMuc29ydEhpc3RvcnkudW5zaGlmdCh0KX19LGQucHJvdG90eXBlLl9tb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmxheW91dE1vZGUsZT10aGlzLm1vZGVzW3RdO2lmKCFlKXRocm93IEVycm9yKFwiTm8gbGF5b3V0IG1vZGU6IFwiK3QpO3JldHVybiBlLm9wdGlvbnM9dGhpcy5vcHRpb25zW3RdLGV9LGQucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3QucHJvdG90eXBlLl9yZXNldExheW91dC5jYWxsKHRoaXMpLHRoaXMuX21vZGUoKS5fcmVzZXRMYXlvdXQoKX0sZC5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbW9kZSgpLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24odCl9LGQucHJvdG90eXBlLl9tYW5hZ2VTdGFtcD1mdW5jdGlvbih0KXt0aGlzLl9tb2RlKCkuX21hbmFnZVN0YW1wKHQpfSxkLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlKCkuX2dldENvbnRhaW5lclNpemUoKX0sZC5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZSgpLm5lZWRzUmVzaXplTGF5b3V0KCl9LGQucHJvdG90eXBlLmFwcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkSXRlbXModCk7aWYoZS5sZW5ndGgpe3ZhciBpPXRoaXMuX2ZpbHRlclJldmVhbEFkZGVkKGUpO3RoaXMuZmlsdGVyZWRJdGVtcz10aGlzLmZpbHRlcmVkSXRlbXMuY29uY2F0KGkpfX0sZC5wcm90b3R5cGUucHJlcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2l0ZW1pemUodCk7aWYoZS5sZW5ndGgpe3ZhciBpPXRoaXMuaXRlbXMuc2xpY2UoMCk7dGhpcy5pdGVtcz1lLmNvbmNhdChpKSx0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpO3ZhciBvPXRoaXMuX2ZpbHRlclJldmVhbEFkZGVkKGUpO3RoaXMubGF5b3V0SXRlbXMoaSksdGhpcy5maWx0ZXJlZEl0ZW1zPW8uY29uY2F0KHRoaXMuZmlsdGVyZWRJdGVtcyl9fSxkLnByb3RvdHlwZS5fZmlsdGVyUmV2ZWFsQWRkZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbm9UcmFuc2l0aW9uKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpbHRlcih0KX0pO3JldHVybiB0aGlzLmxheW91dEl0ZW1zKGUsITApLHRoaXMucmV2ZWFsKGUpLHR9LGQucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmFkZEl0ZW1zKHQpO2lmKGUubGVuZ3RoKXt2YXIgaSxvLG49ZS5sZW5ndGg7Zm9yKGk9MDtuPmk7aSsrKW89ZVtpXSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoby5lbGVtZW50KTt2YXIgcj10aGlzLl9maWx0ZXIoZSk7Zm9yKHRoaXMuX25vVHJhbnNpdGlvbihmdW5jdGlvbigpe3RoaXMuaGlkZShyKX0pLGk9MDtuPmk7aSsrKWVbaV0uaXNMYXlvdXRJbnN0YW50PSEwO2Zvcih0aGlzLmFycmFuZ2UoKSxpPTA7bj5pO2krKylkZWxldGUgZVtpXS5pc0xheW91dEluc3RhbnQ7dGhpcy5yZXZlYWwocil9fTt2YXIgYz1kLnByb3RvdHlwZS5yZW1vdmU7cmV0dXJuIGQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt0PW8odCk7dmFyIGU9dGhpcy5nZXRJdGVtcyh0KTtpZihjLmNhbGwodGhpcyx0KSxlJiZlLmxlbmd0aClmb3IodmFyIGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspe3ZhciBzPWVbaV07bihzLHRoaXMuZmlsdGVyZWRJdGVtcyl9fSxkLnByb3RvdHlwZS5zaHVmZmxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLml0ZW1zLmxlbmd0aDtlPnQ7dCsrKXt2YXIgaT10aGlzLml0ZW1zW3RdO2kuc29ydERhdGEucmFuZG9tPU1hdGgucmFuZG9tKCl9dGhpcy5vcHRpb25zLnNvcnRCeT1cInJhbmRvbVwiLHRoaXMuX3NvcnQoKSx0aGlzLl9sYXlvdXQoKX0sZC5wcm90b3R5cGUuX25vVHJhbnNpdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uO3RoaXMub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb249MDt2YXIgaT10LmNhbGwodGhpcyk7cmV0dXJuIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb249ZSxpfSxkLnByb3RvdHlwZS5nZXRGaWx0ZXJlZEl0ZW1FbGVtZW50cz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTAsaT10aGlzLmZpbHRlcmVkSXRlbXMubGVuZ3RoO2k+ZTtlKyspdC5wdXNoKHRoaXMuZmlsdGVyZWRJdGVtc1tlXS5lbGVtZW50KTtyZXR1cm4gdH0sZH12YXIgcz10LmpRdWVyeSxhPVN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9OmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9LHU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHA9dS50ZXh0Q29udGVudD9mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXh0Q29udGVudH06ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5uZXJUZXh0fSxoPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsZj1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbih0LGUpe3JldHVybiB0LmluZGV4T2YoZSl9OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtvPmk7aSsrKWlmKHRbaV09PT1lKXJldHVybiBpO3JldHVybi0xfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwibWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCIsXCJpc290b3BlL2pzL2l0ZW1cIixcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVcIixcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL21hc29ucnlcIixcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL2ZpdC1yb3dzXCIsXCJpc290b3BlL2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiXSxyKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1yKHJlcXVpcmUoXCJvdXRsYXllclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3JcIikscmVxdWlyZShcIi4vaXRlbVwiKSxyZXF1aXJlKFwiLi9sYXlvdXQtbW9kZVwiKSxyZXF1aXJlKFwiLi9sYXlvdXQtbW9kZXMvbWFzb25yeVwiKSxyZXF1aXJlKFwiLi9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIikscmVxdWlyZShcIi4vbGF5b3V0LW1vZGVzL3ZlcnRpY2FsXCIpKTp0Lklzb3RvcGU9cih0Lk91dGxheWVyLHQuZ2V0U2l6ZSx0Lm1hdGNoZXNTZWxlY3Rvcix0Lklzb3RvcGUuSXRlbSx0Lklzb3RvcGUuTGF5b3V0TW9kZSl9KHdpbmRvdyk7Il0sImZpbGUiOiJ2ZW5kb3IvanF1ZXJ5Lmlzb3RvcGUubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=